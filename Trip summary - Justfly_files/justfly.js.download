(function(){try{
"use strict";(()=>{var rm=Object.defineProperty;var nm=(t,e,o)=>e in t?rm(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;var Oo=(t,e,o)=>(nm(t,typeof e!="symbol"?e+"":e,o),o);var f=window.IntentProperties?window.IntentProperties.namespace||"intent":"blackcrow",i=window.blackcrow||window.intent||{},d=[];Array.isArray(i)&&(d=i,i={});i.BUNDLE_NAME="justfly.js";i.BUILD_NUMBER="13948";i.TAG_SRC=window.blackcrowTagSrc||"JS";window.blackcrow=i;window.intent=i;var p=i.SITE_NAME||"justfly",Qr="init.blackcrow.ai";document.currentScript&&document.currentScript instanceof HTMLElement?Qr=document.currentScript.src.split("/")[2]:i.TAG_SRC==="ShopifyAppExtension"&&(Qr="shopify-init.blackcrow.ai");var m="https://"+Qr+"/";var Lo=`
`;function j(t,e){if(typeof t=="string"){let o=t.split(Lo);return o.splice(1,e),o.join(Lo)}return""}function _s(t){return typeof t=="string"?t.split(Lo).filter(r=>{r=r.toLowerCase();let n=m.toLowerCase(),a="justfly.js".toLowerCase();return!(r.includes(n)&&r.includes(a))}).join(Lo):t}function Zr(){return i.TAG_SRC||"JS"}function E(){return Zr()==="ShopifyAppExtension"}function q(t,e,o,r){function n(a){typeof r=="function"&&r(a)}try{fetch(t,e).then(a=>{if(a.ok)typeof o=="function"&&o(a);else if(e?.mode!=="no-cors"){let u=`${a.status} ${a.statusText}`;try{a.json().then(s=>{let c=s.errors[0];u=`${c.error_type}: ${c.error_message}`,n(new Error(u))}).catch(()=>{n(new Error(u))})}catch{n(new Error(u))}}}).catch(n)}catch(a){n(a)}}function im(){try{return window.location!==window.top.location}catch{return!0}}function tn(){return E()?window.location.hostname:window.top.location.hostname}function hs(){return E()?window.location:im()?window.top.location:window.location}function K(){return hs()?.pathname}function I(){return hs().href}function ot(){return window?.navigator?.userAgent}function zt(t){return performance&&typeof performance.getEntriesByType=="function"&&performance.getEntriesByType(t)||[]}function Ro(){return performance&&typeof performance.now=="function"&&performance.now()||0}function Qt(t,e){let o=globalThis.browser;if(E()&&o){q(t,{method:"POST",keepalive:!0,mode:"no-cors",body:e},()=>{},r=>{i.error(r)});return}window?.navigator?.sendBeacon(t,e)}var am=["clicktripz","example","partner"],sm=[".shopifypreview.","localhost.","demo.","staging.","development-","development.","dev-","dev.","devstore-","devstore.","development2","sandbox-","sandbox.","-sandbox"],cm=["localhost","127.0.0.1"];function fm(){let t=tn();return t===""||cm.includes(t)}function um(){let t=tn().toLocaleLowerCase();return sm.some(e=>t.indexOf(e.toLocaleLowerCase())!==-1)}function Gt(t){return am.indexOf(t.toLowerCase())!==-1||fm()||um()}function X(t,e={},o="info"){if(Gt(p))return;let r="https://monitor-api.blackcrow.ai/",n=!1,a=parseInt("13948",10)||0,u=JSON.stringify({message:t,status:o,service:"javascript-api",version:a,ddsource:"browser",ddtags:`env:${n?"dev":"production"},version:${a}`,"logger.name":"monitor-api","http.useragent":ot(),"view.site":p,...e});Qt(r,u)}function ys(t){let e=Math.random();(t.overrideSampling||e>=.3&&e<.4)&&X(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"view.url":I(),"view.referrer":document.referrer})}function pm(t){if(typeof t.stack=="string"&&t.stack)return t.stack;try{throw t}catch(e){return j(e.stack,2)}}function mm(t){let e=!0;return t.skipNotify&&(e=!1),t.message.indexOf("com.gargoylesoftware.htmlunit")!==-1&&(e=!1),e}function dm(t,e){let r=`BlackCrow${e?` ${e}`:""} ${t.stack}`;globalThis.console&&(globalThis.console.error?globalThis.console.error(r):globalThis.console.log(r))}function Do(t,e={}){if(!t)return;try{t.stack=pm(t)}catch{}!1&&dm(t,e.appName),mm(t)&&typeof Do.sendErrorToServer=="function"&&Do.sendErrorToServer(t)}Do.sendErrorToServer=ys;i.error=Do;function Fo(t,e){let o=document.createElement("link");o.rel=e,o.href=t,document.head.appendChild(o)}i.TAG_SRC!=="ShopifyAppExtension"&&!window.blackcrowpreconnected&&(Fo("https://api.blackcrow.ai/","preconnect"),Fo("https://api.blackcrow.ai/","dns-prefetch"),Fo(m,"preconnect"),Fo(m,"dns-prefetch"),window.blackcrowpreconnected=1);function w(t,e,o){if(t)if(typeof t.length<"u"){for(let r=0,n=t.length;r<n;r+=1)if(e.call(o,t[r],r,t)===!1)return}else{let r=Object.keys(t);for(let n=0,a=r.length;n<a;n+=1)if(e.call(o,t[r[n]],r[n],t)===!1)return}}var lm="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";var Es=(t=21)=>{let e="",o=t;for(;o--;)e+=lm[Math.random()*64|0];return e};var ws=Es;function D(t,e){if(E())return window.blackcrow.cookie.get(t);e=e||document.cookie;let o={};return w(e.split(/\s?;\s?/),r=>{let n=r.split(/\s?=\s?/);o[n.shift().trim()]=n.join("=").trim()}),o[t]}async function F(t,e){try{return E()?await globalThis.browser.cookie.get(t):D(t,e)}catch{}return null}var en="_bcai_h",Ge="_bcai_i",on="_bcai_e",vs="_bcai_t",Ss="_bcai_up",rn="_bcai_vn",nn="_bcai_vs",Bo="_bcai_v",We="_bcai_pu",an="_bcai_lpv",sn="_bcai_spv",Mo="_bcai_em",cn="_bcai_fn",fn="_bcai_ln",$o="_bcai_ph",Is="_bcai_koc",As="_bcai_khs",xs="_bcai_kps",un="_bcai_kid",bs="_bcai_pwo_ebc",He="_bcai_isn",pn="_bcai_fcpes",mn="_bcai_ca",dn="_bcai_ebc",Ps="_bcai_nfs",Uo="_bcai_li",Ts="fbclid",Vo="_fbc",Zt="_fbp",qo="__kla_id";var je;function ln(){if(je)return je;let t=document.location.hostname.split("."),e,o,r=t.length;if(r===1)je="";else{for(e=`${vs}${new Date().valueOf()}`;r>2&&(r-=1,o=t.slice(1).join("."),document.cookie=`${e}=${e}; domain=${o}`,e=D(e),document.cookie=`${e}=1; expires=Thu, 01 Jan 1970 00:00:00 GMT; domain=${o}`,!!e);)t.shift();je=t.join(".")}return je}function U(t,e,o){try{let r;if(o){let a=new Date;a.setTime(a.getTime()+o*60*1e3),r=`;expires=${a.toUTCString()}`}else r="";let n=`${t}=${e}${r};domain=${ln()};path=/`;E()?(browser.cookie.set(n),window.blackcrow.cookie.set(t,e)):document.cookie=n}catch{}}var fe;function Wt(){return fe||(fe=D(Ge),fe||(fe=ws(),U(Ge,fe,1051200)),fe)}function gm(t,e){var o,r,n,a,u,s,c,l,g,y;for(o=t.length&3,r=t.length-o,n=e,u=3432918353,c=461845907,y=0;y<r;)g=t.charCodeAt(y)&255|(t.charCodeAt(++y)&255)<<8|(t.charCodeAt(++y)&255)<<16|(t.charCodeAt(++y)&255)<<24,++y,g=(g&65535)*u+(((g>>>16)*u&65535)<<16)&4294967295,g=g<<15|g>>>17,g=(g&65535)*c+(((g>>>16)*c&65535)<<16)&4294967295,n^=g,n=n<<13|n>>>19,a=(n&65535)*5+(((n>>>16)*5&65535)<<16)&4294967295,n=(a&65535)+27492+(((a>>>16)+58964&65535)<<16);switch(g=0,o){case 3:g^=(t.charCodeAt(y+2)&255)<<16;case 2:g^=(t.charCodeAt(y+1)&255)<<8;case 1:g^=t.charCodeAt(y)&255,g=(g&65535)*u+(((g>>>16)*u&65535)<<16)&4294967295,g=g<<15|g>>>17,g=(g&65535)*c+(((g>>>16)*c&65535)<<16)&4294967295,n^=g}return n^=t.length,n^=n>>>16,n=(n&65535)*2246822507+(((n>>>16)*2246822507&65535)<<16)&4294967295,n^=n>>>13,n=(n&65535)*3266489909+(((n>>>16)*3266489909&65535)<<16)&4294967295,n^=n>>>16,n>>>0}var _m=4294967295,hm=108;function gn(t){return gm(t||"",hm)/_m}function G(t={}){let e=Wt(),o=t.name||"",{force:r,allocations:n}=t,a=gn(`${e}${o}`);if(r)return n.find(l=>l.name===r)?.value;let u=0,s=[];w(t.allocations,l=>{if(s.push({min:u,max:u+l.percent,value:l.value}),u+=l.percent,u>1)throw new Error("Bucket allocation exceeds 100%")});let c;return w(s,l=>a>=l.min&&a<l.max?(c=l.value,!1):!0),c}function ut(){return document.referrer}function Ae(){return document.title}function ym(t,e){let o=e.split("[");return o.length>1?t&&t[o[0]]&&t[o[0]][parseInt(o[1],10)]:t&&t[e]}function v(t,e){if(!(!t||!e||typeof e!="string"))return e.split(".").reduce(ym,t)}function ue(t,e,o,r,n){!t||!e||typeof e!="string"||(e.indexOf(".")!==-1?(e=e.split("."),ue(t,e.shift(),o,e,n)):!r||r.length===0?(!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=o):((!n||!Object.prototype.hasOwnProperty.call(t,e))&&(t[e]=t[e]||{}),ue(t[e],r.shift(),o,r,n)))}i.storage=i.storage||{};function Em(t,e){let o=i.storage[t].audience;typeof o=="object"&&e?.audience===!1?i.storage[t]={audience:o}:i.storage[t]={}}function tt(t){t&&(i.storage[t]=i.storage[t]||{});function e(){return i.storage[t]}return{clear:o=>{t==="bound_events"&&o?Em(t,o):i.storage[t]={}},getAll:()=>e()||{},get:o=>v(e(),o),set:(o,r)=>{let n=e();typeof o=="string"?ue(n,o,r):w(o,(a,u)=>{ue(n,u,a)})},push:(o,r)=>{let n=e(),a=v(n,o);Array.isArray(a)?a.push(r):ue(n,o,[r])}}}var ks=tt("page"),Cs="history";function wm(t,e){return typeof e=="function"?e.toString().replace(/\s+/g," "):e}function Ns(){return console.group(`${f} history`),w(ks.get(Cs),t=>{console.groupCollapsed(t.name),console.log("data",JSON.stringify(t.data,wm,4)),console.log(t.source),console.groupEnd()}),console.groupEnd(),""}function z(t,e){let o=new Error("");o.name="source",o.stack=j(o.stack,1),ks.push(Cs,{name:t,data:e,source:o})}var vm=Object.prototype.toString,_n=Array.prototype.slice;function S(t,...e){return t=t||{},w(e,o=>{w(o,(r,n)=>{let a=vm.call(r).split(" ").pop();if(a!=="Undefined]"){if(!r||r===r.window||r.nodeType||r._isVue){t[n]=r;return}if(a==="Object]"){t[n]=t[n]||{},S(t[n],r);return}if(a==="Array]"){t[n]=t[n]||[],t[n]=_n.call(t[n]).concat(r);return}if(a==="NodeList]"||a==="HTMLCollection]"){t[n]=t[n]||[],t[n]=_n.call(t[n]).concat(_n.call(r));return}t[n]=r}})},this),t}window.blackcrow.pushedData=window.blackcrow.pushedData||{};function hn(){let t=window.blackcrow.pushedData;t&&t.winLocation!==I()&&(window.blackcrow.pushedData={})}function Go(t){S(window.blackcrow.pushedData,t,{winLocation:I()})}function Wo(t){window.blackcrow.pushedData={...t,winLocation:I()}}function P(t){return v(window.blackcrow.pushedData,t)}var yn=tt("events_api_response"),En=tt("api_config");function xe(t){let e=new Error(t);return e.name="SequencingError",e.status="warn",e.stack=j(e.stack,1),e}var Os=!1,Ls=!1;function Rs(t,e){if(t){let o=e.get(`data.${t}`);if(typeof o=="string"){let r=o.toLowerCase();return r==="off"||r==="false"?!1:o}return o}return e.get("data")}function wn(t){En.set("data",t),Ls=!0}function L(t){return Ls===!1&&i.error(new xe("Attempting to access apiConfig before it has been set!")),Rs(t,En)}function Ke(t){yn.set("data",t),Os=!0}function vn(t){return Os===!1&&i.error(new xe("Attempting to access events api response before it has been set!")),Rs(t,yn)}function Sn(){return!!vn("history_id")}function Sm(t){let e=new Error(t);return e.name="URIDecodingError",e.status="warn",e.stack=j(e.stack,1),e}function dt(t){let e={};if(typeof t=="string"&&t.length){let o=t.split("?");o.shift(),o=o.join("?"),o=o.split("#")[0],w(o.split("&"),r=>{let n=r;try{n=decodeURIComponent(n)}catch{i.error(new Sm(`Unable to decode URI component: ${n}`))}let a=n.indexOf("="),u=a>0?[n.slice(0,a),n.slice(a+1)]:[n];typeof u[1]<"u"&&(e[u[0]]=u[1])})}return e}function W(t,e){let o=e?dt(e):dt(I()),r=Object.keys(o).find(n=>n?.toLowerCase()===t?.toLowerCase());return o[r]}var Ds="config.visitor.query_string";function Im(t){let e=t?v(t,Ds):L(Ds);return e?{param:e.param,separator:e.separator,index:e.index}:{}}function Am(t){let e=t.param;if(e)return W(e)}function xm(t,e){let o=e.separator,r=e.index;return o&&r?t.split(o)[r]||void 0:t}function Fs(t){let e=Im(t),o=Am(e);if(o)return xm(o,e)}var In,An;function bm(){let t,e=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga;return e&&typeof e.getAll=="function"&&w(e.getAll(),o=>{try{let r=o.get("clientId");if(r)return t=r,!1}catch{}}),t}function Pm(){if(typeof An<"u")return An;let t,e=D("_ga");if(e){let o=e.split(".");o.shift(),o.shift(),t=o.join(".")}return An=t,t}function te(t){if(In)return In;let e=P("google_id")||Fs(t)||window.gaGlobal&&window.gaGlobal.vid||bm()||Pm();return In=e,e}var Bs="blackcrow",Ms="cookie",$s="global",Us="google",xn="pushed_data";var pe,Tt=Bs.toUpperCase(),kt=Bo,Ho=!1;function Vs(t,e,o){U(Bo,t,1051200),U(nn,e,1051200),U(rn,o,1051200)}function be(){if(pe)return{id:pe,source:Tt,name:kt,fallback:Ho};if(pe=D(Bo),pe)return Tt=D(nn)||Tt,kt=D(rn)||kt,Vs(pe,Tt,kt),{id:pe,source:Tt,name:kt,fallback:Ho};let t=L("config.visitor.id_source"),e=L("config.visitor.id_name"),o=P("visitor_id");if(o&&(Tt=xn.toUpperCase(),kt="visitor_id"),t===Ms){let r=D(e);r&&(o=r,Tt=t.toUpperCase(),kt=e)}else if(t===$s){let r=v(window,e);r&&(o=r,Tt=t.toUpperCase(),kt=e)}else if(t===xn){let r=P(e);r&&(o=r,Tt=t.toUpperCase(),kt=e)}else if(t===Us){let r=te();r&&(o=r,Tt=t.toUpperCase(),kt=e)}return o||(o=Wt(),Ho=!0),pe=o,Vs(o,Tt,kt),{id:o,source:Tt,name:kt,fallback:Ho}}function Tm(t){(t.overrideSampling||G({name:"error_sampling",allocations:[{percent:.1,value:!0}]}))&&X(t.message,{status:t.status||"error","error.kind":t.name,"error.message":t.message,"error.stack":t.stack,"usr.id":be().id,"view.url":P("page_url")||I(),"view.referrer":P("page_referrer_url")||ut()}),z(t.name,t)}function qs(){i.error.sendErrorToServer=Tm}function km(t){let e={name:"other",major:0,minor:0};if(/googlebot/.test(t)||/adsbot/.test(t)||/bingbot/.test(t)||/bingpreview/.test(t)||/slurp/.test(t)||/storebot/.test(t)||/spider/.test(t)||/crawler/.test(t)||/yandexbot/.test(t)||/ptst[ \/]/.test(t)||/externalhit/.test(t))return e.name="bot",e;let r=/(msie) ([\w.]+)/.exec(t)||/(ucbrowser)[ \/]([\w.]+)/.exec(t)||/(miuibrowser)[ \/]([\w.]+)/.exec(t)||/(opera mini)[ \/]([\w.]+)/.exec(t)||/(opr)[ \/]([\w.]+)/.exec(t)||/(opera)(?:.*version)?[ \/]([\w.]+)/.exec(t)||/(firefox)[ \/]([\w.]+)/.exec(t)||/(trident)(?:.*? rv:([\w.]+))?/.exec(t)||/(edg)[ \/]([\w.]+)/.exec(t)||/(edge)[ \/]([\w.]+)/.exec(t);if(r){r[1]==="opr"?r[1]="opera":r[1]==="trident"?r[1]="msie":r[1]==="edg"&&(r[1]="edge"),e.name=r[1].replace(/\s+/,"");let n=(r[2]||"").split(/\.|-|_/);e.major=parseInt(n[0],10)||0,e.minor=parseInt(n[1],10)||0}return e}function Cm(t){return!!(t.match(/ipad/)||t.match(/android/)&&!t.match(/mobi|mini|fennec/)||t.match(/macintosh/)&&window.navigator.maxTouchPoints>1)}function Nm(t){return!!t.match(/ip(hone|od)|android.+mobile|windows (ce|phone)|blackberry|bb10|symbian|webos|firefox.+fennec|opera m(ob|in)i|tizen.+mobile|polaris|iemobile|lgtelecom|nokia|sonyericsson|dolfin|uzard|natebrowser|ktf;|skt;/)}function Om(t){return Nm(t)?"mobile":Cm(t)?"tablet":"desktop"}function me(t){t=t||"";let e=t.toLowerCase();return{browser:km(e),deviceType:Om(e)}}function Ft(t){let e=new Error(t);return e.name="NotSupportedError",e.status="warn",e.stack=j(e.stack,1),e}function It(){return!!v(window,"Shopify")}function Je(){return It()&&K()?.includes("products")}function Gs(){return It()&&K()?.includes("/search")}function Lm(){return It()&&K()==="/"}function Pe(){return!!v(window,"Shopify.Checkout")}function Ws(){let t=I();return t&&t.includes("/checkouts")}function Hs(){let t=I();return t&&(t.includes("/thank_you")||t.includes("/purchase/thanks")||t.includes("/thank-you"))}function Rm(){let t=v(window,"Shopify.Checkout.isOrderStatusPage"),e=v(window,"Shopify.checkout");return t!==void 0||e!==void 0}function ee(){return v(window,"Shopify.Checkout.currency")||v(window,"cart_json.currency")||v(window,"Shopify.currency.active")||v(window,"afterpay_shop_currency")}function jo(){return v(window,"Shopify.Checkout.totalPrice")?.toString()}function Ct(){if(!It())return;let t=v(window,"Shopify.Checkout.step");if(t)switch(t){case"payment_method":return"payment";case"shipping_method":return"shipping";case"contact_information":return"contact";case"thank_you":return"confirmation";default:return t}return Rm()?"order_status":Je()?"products":Lm()?"index":K()}function Dm(){try{return!new Error("")}catch(t){return t}}function js(){let t=Dm();if(t)throw t.name="NotSupportedError",t.status="warn",t.message="Missing feature: errorConstructor",t}function Ks(){let{browser:t}=me(ot());if(typeof t=="object"){let e=t.name,o=t.major;if(e==="bot"||e==="msie"||e==="edge"&&o<15||e==="firefox"&&o<54||e==="chrome"&&o<42||e==="safari"&&o<10||e==="ucbrowser"||e==="miuibrowser"||e==="opera"&&o<38||e==="operamini")return!1}return!0}function Fm(t){return E()?Hs()?!!t?.config?.loadBundleWithShopifyWebPixelOnThankYouPage:Ws()?t?.config?.loadBundleWithShopifyWebPixel??!0:!1:!0}function bn(t,e){if(!Ks())throw new Ft("Browser not supported");Fm(t)&&(js(),e())}function Js(){if(!Ks())throw new Ft("Browser not supported");js()}function Ye(t,e,o){if(t){let n=(t.options||{}).origEvent||{};if(clearTimeout(n.timeout),typeof t.callback=="function"&&!n.timeoutReached){try{t.callback(e)}catch(a){i.error(a)}typeof o=="function"&&o()}}}var Bm=tt("bound_events"),Mm=tt("triggered_events");function x(t,e,o,r={}){let n={appName:t,eventName:e,callback:o,options:r};Bm.push(`${t}.${e}`,n),w(Mm.get(`${t}.${e}`),a=>{Ye(n,a.data,a.onExec)})}function lt(t,e){let o=new Error(t);return o.name=`${e||""}RequestError`,o.skipNotify=!0,o.stack=j(o.stack,1),o}function Ko(t,e,o){return function(...n){try{return t.apply({},n)}catch(a){o&&o.interval&&clearInterval(o.interval),i.error(a,{appName:e})}}}function $m(t,e,...o){let r={},n=setInterval.apply(globalThis,[Ko(t,this.appName,r),e].concat(o));return r.interval=n,n}function Um(t,e,...o){return setTimeout.apply(globalThis,[Ko(t,this.appName),e].concat(o))}function Vm(t,e,o,r){let n=o.wrapped||Ko(o,this.appName);o.wrapped=n,t.addEventListener?t.addEventListener(e,n,r):t.attachEvent&&t.attachEvent(e,n)}function qm(t,e,o,r){o?t.removeEventListener(e,o.wrapped,r):t.removeEventListener(e)}var _={fn:Ko,addListener:Vm,removeListener:qm,setInterval:$m,setTimeout:Um};function V(t,e,o,r){function n(s){let c=new lt(s.message,e.servletName);i.error(c,{customDimensions:{url:t}}),typeof r=="function"&&_.fn(r)(c)}function a(s){if(typeof s!="object"){n(new Error("JSON is not an object"));return}typeof o=="function"&&_.fn(o)(s||{})}function u(s){s.json().then(_.fn(a)).catch(c=>{n(new Error(`Invalid JSON ${c.message}`))})}q(t,e,u,n)}function Pn(){let t=Math.round(Ro());if(!t||t<1)return"0";if(t<10)return"10";let e="0";return w(`${t}`,(o,r)=>{r===0?e=o:e+="0"}),e}var Jo=document.documentElement,Ys=window.screen,Tn=Math.max;function Xs(){let t=window?.innerHeight+window?.scrollY||0;return Tn(Jo?.offsetHeight,Jo?.scrollHeight,t)}function zs(){return E()?window.outerHeight:Ys?.height}function Qs(){return E()?window.outerWidth:Ys?.width}function de(){return Tn(window.pageYOffset,Jo?.scrollTop)}function Zs(){return Tn(Jo?.clientWidth,window.innerWidth)}async function Q(t){try{let e=E()?await globalThis.browser.localStorage.get(t):window.localStorage.getItem(t);return JSON.parse(e)}catch{}return null}async function Z(t){try{if(E()){let e=await globalThis.browser.sessionStorage.getItem(t);return JSON.parse(e)}return JSON.parse(window.sessionStorage.getItem(t))}catch{}return null}var kn,Cn;function Gm(){if(typeof Cn<"u")return Cn;let t,e=D(Zt);if(e){let o=e.split(".");o.shift(),o.shift(),t=o.join(".")}return Cn=t,t}function tc(){if(kn)return kn;let t=P("facebook_id")||Gm();return kn=t,t}var Nn;function Wm(){let t=v(window,"Shopify.checkout.customer_id")||v(window,"ShopifyAnalytics.meta.page.customerId")||v(window,"__st.cid");if(t)return t.toString()}function ec(){if(Nn)return Nn;let t=Wm();return Nn=t,t}var On;async function Hm(){try{return JSON.parse(window.atob(await F(qo))).$exchange_id}catch{return}}async function le(){try{if(On)return On;let t=await Hm();return On=t,t}catch(t){i.error(t);return}}function oc(){return window?.ju_config?.ju_vid}function rc(){return window?.bouncex?.cookie?.hardID}function nc(){return window?.bouncex?.cookie?.softID}function ic(){return window?.edgemesh?.id}function gt(t,e){try{e&&(E()?(window.blackcrow.localStorage.set(t,JSON.stringify(e)),browser.localStorage.setItem(t,JSON.stringify(e))):window.localStorage.setItem(t,JSON.stringify(e)))}catch{}}function oe(t){return`${Math.random().toString(36).substring(2,3)}${btoa(t)}`}function ge(t){return t?atob(t.substring(1)):void 0}function Xe(t){try{return document.querySelectorAll(`:is(${t})`)}catch{}try{return document.querySelectorAll(`:matches(${t})`)}catch{}try{return document.querySelectorAll(`:-webkit-any(${t})`)}catch{}try{return document.querySelectorAll(`:-moz-any(${t})`)}catch{return[]}}function ac(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let o=e.data.__attentive||{};o&&o.email&&t(o.email)}})}function sc(t){let e=document.getElementById("continue_button"),o=document.querySelectorAll("input[type=email]");e&&o&&_.addListener(e,"click",()=>{t(o[0]&&o[0].value)})}function Yo(){return v(window,"ShopifyCustomer.email")||v(window,"Shopify.checkout.email")||v(window,"Shopify.Checkout.customer.email")}function cc(){return v(window,"userProperties.email")}function fc(){let t=v(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$email}function Rn(t){if(t)return t.trim()}function Dn(t){return new RegExp(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/).test(t)}function Fn(t){let e=Rn(t);return e&&Dn(e)?e:void 0}function Bn(t){let e=Fn(t);return e?oe(e):void 0}function Te(t){let e=Bn(t);e&&gt(Mo,e)}function jm(t,e=()=>{}){t.value&&e(t.value)}function Km(t,e){let o=t.textContent||t.innerText;return o&&(o=o.toLowerCase()),o&&o.indexOf(e.toLowerCase())!==-1}function Ln(t){return Km(t,"email")}function Jm(t){if(t.labels){if(Array.from(t.labels).some(o=>Ln(o)))return!0}else if(t.id&&Array.from(document.getElementsByTagName("label")).some(o=>o.htmlFor===t.id&&Ln(o)))return!0;if(t.parentNode){let e=t.parentNode;return e.tagName.toLowerCase()==="label"&&Ln(e)}return!1}function Ym(t){return Array.from(t).filter(o=>Jm(o))}var uc='input[type="email"], input[autocomplete~="email"], input[placeholder~="email" i], input[type="text"][id*="email" i], input[type="text"][name*="email" i]';function Mn(){let t=Xe(uc);if(!t.length){let e=document.querySelectorAll('input[type="text"]');e.length&&(t=Ym(e))}return t}function Xo(t=()=>{}){let e=Mn();w(e,o=>{jm(o,t)}),_.addListener(window,"focusout",o=>{let r=o.target;if(r.matches(uc)||Array.isArray(e)&&e.includes(r)){let n=r.value;n&&t(n)}})}function pc(t){let e=Yo()||cc()||fc();e&&t(e),ac(o=>{t(o)}),sc(o=>{t(o)}),Xo(o=>{t(o)})}function mc(t=()=>{}){let e=Yo()||cc()||fc();return e?(Te(e),t()):(ac(o=>{Te(o)}),sc(o=>{Te(o)}),Xo(o=>{Te(o),t()})),e}async function pt(){try{let t=await Q(Mo)||await F(Mo);return t?ge(t):void 0}catch(t){i.error(t);return}}function re(t,e){var o=(t&65535)+(e&65535),r=(t>>16)+(e>>16)+(o>>16);return r<<16|o&65535}function Xm(t,e){return t<<e|t>>>32-e}function zo(t,e,o,r,n,a){return re(Xm(re(re(e,t),re(r,a)),n),o)}function rt(t,e,o,r,n,a,u){return zo(e&o|~e&r,t,e,n,a,u)}function nt(t,e,o,r,n,a,u){return zo(e&r|o&~r,t,e,n,a,u)}function it(t,e,o,r,n,a,u){return zo(e^o^r,t,e,n,a,u)}function at(t,e,o,r,n,a,u){return zo(o^(e|~r),t,e,n,a,u)}function zm(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;var o,r,n,a,u,s=1732584193,c=-271733879,l=-1732584194,g=271733878;for(o=0;o<t.length;o+=16)r=s,n=c,a=l,u=g,s=rt(s,c,l,g,t[o],7,-680876936),g=rt(g,s,c,l,t[o+1],12,-389564586),l=rt(l,g,s,c,t[o+2],17,606105819),c=rt(c,l,g,s,t[o+3],22,-1044525330),s=rt(s,c,l,g,t[o+4],7,-176418897),g=rt(g,s,c,l,t[o+5],12,1200080426),l=rt(l,g,s,c,t[o+6],17,-1473231341),c=rt(c,l,g,s,t[o+7],22,-45705983),s=rt(s,c,l,g,t[o+8],7,1770035416),g=rt(g,s,c,l,t[o+9],12,-1958414417),l=rt(l,g,s,c,t[o+10],17,-42063),c=rt(c,l,g,s,t[o+11],22,-1990404162),s=rt(s,c,l,g,t[o+12],7,1804603682),g=rt(g,s,c,l,t[o+13],12,-40341101),l=rt(l,g,s,c,t[o+14],17,-1502002290),c=rt(c,l,g,s,t[o+15],22,1236535329),s=nt(s,c,l,g,t[o+1],5,-165796510),g=nt(g,s,c,l,t[o+6],9,-1069501632),l=nt(l,g,s,c,t[o+11],14,643717713),c=nt(c,l,g,s,t[o],20,-373897302),s=nt(s,c,l,g,t[o+5],5,-701558691),g=nt(g,s,c,l,t[o+10],9,38016083),l=nt(l,g,s,c,t[o+15],14,-660478335),c=nt(c,l,g,s,t[o+4],20,-405537848),s=nt(s,c,l,g,t[o+9],5,568446438),g=nt(g,s,c,l,t[o+14],9,-1019803690),l=nt(l,g,s,c,t[o+3],14,-187363961),c=nt(c,l,g,s,t[o+8],20,1163531501),s=nt(s,c,l,g,t[o+13],5,-1444681467),g=nt(g,s,c,l,t[o+2],9,-51403784),l=nt(l,g,s,c,t[o+7],14,1735328473),c=nt(c,l,g,s,t[o+12],20,-1926607734),s=it(s,c,l,g,t[o+5],4,-378558),g=it(g,s,c,l,t[o+8],11,-2022574463),l=it(l,g,s,c,t[o+11],16,1839030562),c=it(c,l,g,s,t[o+14],23,-35309556),s=it(s,c,l,g,t[o+1],4,-1530992060),g=it(g,s,c,l,t[o+4],11,1272893353),l=it(l,g,s,c,t[o+7],16,-155497632),c=it(c,l,g,s,t[o+10],23,-1094730640),s=it(s,c,l,g,t[o+13],4,681279174),g=it(g,s,c,l,t[o],11,-358537222),l=it(l,g,s,c,t[o+3],16,-722521979),c=it(c,l,g,s,t[o+6],23,76029189),s=it(s,c,l,g,t[o+9],4,-640364487),g=it(g,s,c,l,t[o+12],11,-421815835),l=it(l,g,s,c,t[o+15],16,530742520),c=it(c,l,g,s,t[o+2],23,-995338651),s=at(s,c,l,g,t[o],6,-198630844),g=at(g,s,c,l,t[o+7],10,1126891415),l=at(l,g,s,c,t[o+14],15,-1416354905),c=at(c,l,g,s,t[o+5],21,-57434055),s=at(s,c,l,g,t[o+12],6,1700485571),g=at(g,s,c,l,t[o+3],10,-1894986606),l=at(l,g,s,c,t[o+10],15,-1051523),c=at(c,l,g,s,t[o+1],21,-2054922799),s=at(s,c,l,g,t[o+8],6,1873313359),g=at(g,s,c,l,t[o+15],10,-30611744),l=at(l,g,s,c,t[o+6],15,-1560198380),c=at(c,l,g,s,t[o+13],21,1309151649),s=at(s,c,l,g,t[o+4],6,-145523070),g=at(g,s,c,l,t[o+11],10,-1120210379),l=at(l,g,s,c,t[o+2],15,718787259),c=at(c,l,g,s,t[o+9],21,-343485551),s=re(s,r),c=re(c,n),l=re(l,a),g=re(g,u);return[s,c,l,g]}function Qm(t){var e,o="",r=t.length*32;for(e=0;e<r;e+=8)o+=String.fromCharCode(t[e>>5]>>>e%32&255);return o}function Zm(t){var e,o=[];for(o[(t.length>>2)-1]=void 0,e=0;e<o.length;e+=1)o[e]=0;var r=t.length*8;for(e=0;e<r;e+=8)o[e>>5]|=(t.charCodeAt(e/8)&255)<<e%32;return o}function td(t){return Qm(zm(Zm(t),t.length*8))}function ed(t){var e="0123456789abcdef",o="",r,n;for(n=0;n<t.length;n+=1)r=t.charCodeAt(n),o+=e.charAt(r>>>4&15)+e.charAt(r&15);return o}function od(t){return unescape(encodeURIComponent(t))}function rd(t){return td(od(t))}function nd(t){return ed(rd(t))}function $n(t){return nd(t)}function ne(t){return(L("experiments")||[]).find(o=>o.name===t)||{}}var dc={checkout_abandonment:"ca",klaviyo_overlay:"ko",sticky_call_to_action:"pb"};function Nt(t){let e=ne(t);if(!e.name)return e;let o=dt(I());function r(a,u){let s,c;if(Array.isArray(a)&&a.length&&a[0].value&&typeof a[0].percent=="number")s=`${t}_${u}`,c=a;else if(a.allocations){let l=a.name||u;s=`${t}_${l}`,c=a.allocations}if(s&&c){let l=dc[t]||t,g=a.short_name||u;return G({name:s,allocations:c,force:o[`bcai_${l}_${g}`]})}return a}function n(a,u){if(!a)return a;let s=Array.isArray(a)?[]:{},c;return Object.keys(a).forEach(l=>{let g=u?`${u}_${l}`:l;c=r(a[l],g),s[l]=typeof c=="object"?n(c,g):c}),s}return{name:e.name,active:e.active,data:n(e.data)}}async function Un(){try{if(Nt("pwo_additional_context")?.active){let e=await pt();if(e)return $n(`${e}bcai${p}`)}return}catch(t){i.error(t);return}}function lc(){return window?.__fudge__?.deviceId}var gc=t=>async()=>{try{return P(t)||await Z(t)||await Q(t)||await F(t)}catch(e){i.error(e);return}},Qo=t=>async()=>{try{return await F(t)}catch(e){i.error(e);return}},et=(t,e)=>{let o;return async()=>{try{return o=o||await e(),{platform:t,id:o}}catch(r){i.error(r);return}}},id=et("fa",tc),ad=et("ga",te),sd=et("cdp",gc("cdp_id")),cd=et("shop_cid",ec),fd=et("shop_aid",Qo("_shopify_y")),ud=et("kl_cid",le),pd=et("attv_cid",Qo("__attentive_id")),md=et("ju_cid",oc),dd=et("bx_hid",rc),ld=et("bx_sid",nc),gd=et("tab_cid",gc("taboola global:user-id")),_d=et("bc_cid",Qo(Ge)),hd=et("_bc_i",Wt),yd=et("_bt_uid",Qo("tag_user_id")),Ed=et("_bc_em",Un),wd=et("edme_id",ic),vd=et("fdg_id",lc);async function Vn(){try{return[await id(),await ad(),await sd(),await cd(),await fd(),await ud(),await pd(),await gd(),await _d(),await hd(),await md(),await dd(),await ld(),await yd(),await Ed(),await wd(),await vd()]}catch(t){return i.error(t),[]}}var _c;function qn(){return _c||D(en)||void 0}function hc(t){t&&(_c=t,U(en,t,1051200))}function yc(){let t=qn()?.split("_",3);if(t)return{page_correlation_id:t[0],session_id:t[1]};i.error(new xe("Attempted to parse historyId before it has been set!"))}var ze=tt("page"),Sd={page:{ignored:!1,log_purchase:!1}};function Ec(t){return{page:{ignored:t.ignored,log_purchase:t.log_purchase}}}function wc(t={},e){let o=P("page_id"),r=Sd;o!==void 0&&t?w(t.filter(s=>s.pageName),s=>{if(s.pageName===o)return r=Ec(s),!1}):o===void 0&&t&&w(t.filter(s=>s.pattern),s=>{try{let c=e.match(s.pattern);if(c){if(o=s.pageName,r=Ec(s),c.length>1)for(let l=1;l<c.length;l+=1)o=o.replace(`$${l}`,c[l]);return!1}}catch{}}),o||(o="other");let n=ze.get("lastUrl"),a=ze.get("lastId"),u=o!==a||e!==n;return ze.set("lastUrl",e),ze.set("lastId",o),{id:o,config:r,isNewPage:u,currentUrl:e,lastUrl:n}}function Ot(){return ze.get("lastId")}var Gn={};function vc(t){Gn=t}async function Sc(t,e,o){try{let r={},n=Object.keys(Gn||{});for(let a=0;a<n.length;a+=1){let u=n[a],s=Gn[u];typeof s=="function"?r[u]=await s(t[u],e,o):typeof s<"u"&&(r[u]=s)}return r}catch(r){return i.error(r),{}}}function Id(t,e){return e||(t==="_shopify_y"?"aid":t)}async function Ad(t){try{let e,o=t.value,r=t.nameOverride,n=await F(o);return o&&n&&(e={name:Id(o,r),value:n}),e}catch(e){i.error(e);return}}async function J(t){try{let e=[];for(let o=0;o<t.length;o+=1){let r=t[o];if(r.source==="cookie"){let a=await Ad(r);a&&e.push(a)}}return e}catch(e){return i.error(e),[]}}function Lt(t,e){let o=[];return t&&e&&o.push({name:t,value:e}),o}function Ic(){let t=K(),e=/.*(\/checkouts\/[a-z]{1,3}\/)/gm;if(t?.match(e))return t=t.replace(e,""),t?.replace(/\/$/,"").split("/")[0];if(t?.includes("/checkouts/"))return t=t.replace(/.*checkouts\//,""),t?.replace(/\/$/,"").split("/")[0]}function xd(){let t="0123456789abcdef";return t.charAt(Math.floor(Math.random()*t.length))}function Qe(t){return new Array(t).fill(".",0,t).map(()=>xd()).join("")}function Ze(){return`${Qe(8)}-${Qe(4)}-${Qe(4)}-${Qe(4)}-${Qe(12)}`}function ke(t){return t!==void 0?(t*.01).toLocaleString("en-US",{currency:"USD",minimumFractionDigits:2,useGrouping:!1}):void 0}function to(t){return t?typeof t=="string"?ke(t.replace(/\D/g,"")*1):t.toString():"0.00"}async function Zo(t){try{let[e]=await J(t);return e?.value?{external_id:e.value}:void 0}catch(e){i.error(e);return}}function Ac(){let t=document.getElementById("shopify-pay-alternate-title");if(v(window,"ShopifyPay")&&t)return{custom_dimensions:{payment_type:"shop-pay"}};if(v(window,"Shopify.checkout")){let e=document.getElementsByClassName("payment-icon");if(e.length&&e[0].textContent)return{custom_dimensions:{payment_type:e[0].textContent.trim()}}}}function Wn(){let t={},e=v(window,"Shopify.checkout");if(e&&(S(t,{event_id:e.order_id,total_price:to(e.total_price),currency:e.presentment_currency,shipping_method:e.shipping_rate?.title,shipping_price:to(e.shipping_rate?.price),cart:e.line_items&&e.line_items.map(o=>({id:o.product_id,price:to(o.price),quantity:o.quantity,categories:[o.title],msrp:to(o.line_price),color:o.variant_title,brand:o.vendor}))}),e.discount)){let o=e.discount;S(t,{discounts:[{code:o.code,discount_amount:o.amount,discount_currency:e.currency,discount_percent:o.rate,applicable:o.applicable,reason:o.reason}]})}return t}function Hn(t){return{destination_airport:t.destination_airport,destination_city:t.destination_city,destination_country:t.destination_country,destination_state:t.destination_state,end_date:t.end_date,lodging_id:t.lodging_id,origin_airport:t.origin_airport,rooms:t.rooms,start_date:t.start_date,travelers:t.travelers}}function jn(){return P("partner_controlled_experiments")}var bd=.1,xc=G({name:"performance_sampling",allocations:[{percent:bd,value:!0}]});function eo(t=`${m}js/core/`){try{let e=zt("resource").find(o=>o.name.includes(t));return e&&e.startTime}catch{i.error(new Ft("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Pd(){try{let t=zt("resource").find(e=>e.name.includes("gtm.js"));return t&&t.startTime}catch{i.error(new Ft("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function bc(){try{let t=zt("resource").find(e=>e.name.includes(`${m}js/core/`));if(t){let{name:e}=t;if(e.includes("shopify-init"))return"SHOPIFY";if(e.includes("source=gtm"))return"GTM"}return"JS"}catch{i.error(new Ft("Unable to get start time: Browser does not support PerformanceResourceTiming interface"));return}}function Td(){let t=eo(),e=bc();if(t&&e==="GTM"){let o=Pd();if(o)return t-o}}function kd(){try{let t=zt("resource").find(e=>e.name.includes("https://api.blackcrow.ai/v1/events/view"));return t&&t.startTime}catch{i.error(new Ft("Unable to get time to view request: Browser does not support PerformanceResourceTiming interface"));return}}function Pc(){if(xc){let t=eo(),e=bc()||"unknown",o=e==="GTM"?Td()||"unknown":"N/A";t&&X(`Initial script load after ${t} ms`,{"script.start_time":t,"script.load_method":e,"script.time_since_gtm_start":o,"view.url":P("page_url")||I(),"view.referrer":P("page_referrer_url")||ut()})}}function Tc(){if(xc){let t=kd()-eo();t&&X(`Time to initiate view request: ${t} ms`,{"script.time_to_view":t,"view.url":P("page_url")||I(),"view.referrer":P("page_referrer_url")||ut()})}}function kc(){return{nb:{active:!!window.Northbeam},tw:{active:!!window.TriplePixel},bt:{active:!!window.edgetag}}}var b={VIEW:"view",PURCHASE:"purchase",DELAYED_PURCHASE:"delayed_purchase",BAD_ACTOR_TIMEOUT:"bad_actor_timeout",BAD_ACTOR_BEFOREUNLOAD:"bad_actor_beforeunload",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",PWO_DECISION:"pwo_decision",CA_CART_CHECKOUT:"ca_cart_checkout",CA_PAYMENT:"ca_payment",CA_SHIPPING_EXIT:"ca_shipping_exit",CA_TEST:"ca_test",DEVICE_MOTION:"device_motion",DISCOUNT_APPLIED:"discount_applied",DISCOUNT_INTERACTION:"discount_interaction",MARKETING_CHECKOUT_EVENT:"marketing_checkout_event",KLAVIYO_OPEN:"klv_open",KLAVIYO_CLOSE:"klv_close",KLAVIYO_LEAD:"klv_lead",KLAVIYO_SPLIT:"klv_split",PRED_WELCOME_PLATFORM_LOADED:"pred_welcome_platform_loaded",OUT_OF_STOCK:"out_of_stock",PAYMENT_METHOD_CLICK:"payment_method_click",HEADER_CLICK:"header_click",PREDICTIVE_BUTTON:"predictive_button",PREDICTIVE_BUTTON_DECISION:"predictive_button_decision",PRED_WELCOME_DECISION:"pred_welcome_decision",EXIT_INTENT:"exit_intent",RB_ACTIVE:"rb_active",PRED_WELCOME_OPEN_ATTEMPT:"pred_welcome_open_attempt",PRED_WELCOME_OPEN_LISTENER_SET:"pred_welcome_open_listener_set"};function tr(){return{api_client_type:"JS",api_client_version:"13948",api_client_source:Zr()}}function $t(t){let e=P(`custom_${t}`);return typeof e=="object"?Array.isArray(e)?String(e):JSON.stringify(e):e}function Cd(t,...e){return t=t||{},w(e,o=>{w(o,(r,n)=>{(r||r===0||r===!1)&&(t[n]=r)})}),t}function Nd(){return{coupon:P("coupon"),shipping_method:P("shipping_method"),shipping_price:P("shipping_price"),total_price:P("total_price"),zip_code:P("zip_code"),custom_1:$t(1),custom_2:$t(2),custom_3:$t(3),custom_4:$t(4),custom_5:$t(5),custom_6:$t(6),custom_7:$t(7),custom_8:$t(8),custom_9:$t(9),custom_10:$t(10),traffic_groups:P("traffic_groups"),partner_controlled_experiments:jn(),referrer_source:P("referrer_source"),referrer_medium:P("referrer_medium"),referrer_campaign:P("referrer_campaign"),referrer_term:P("referrer_term"),cart:P("cart"),currency:P("currency"),is_logged_in_user:P("user_is_logged_in"),user_has_subscription:P("user_has_subscription")}}async function Od(t){try{let e=be();return{metadata:tr(),build:"13948",site_name:p,custom_dimensions:P("custom_dimensions"),device_info:ot(),device_width:Qs(),device_height:zs(),page_id:t,page_url:P("page_url")||I(),page_referrer_url:P("page_referrer_url")||ut(),page_title:P("page_title")||Ae(),page_time:Pn(),visitor_id:e.id,internal_id:Wt(),member_id:P("member_id"),history_id:qn(),user_identifiers:await Vn(),user_metadata:{visitor_id:{source:e.source,name:e.name,fallback_used:e.fallback}},bundle_load_start:eo(),attr:kc()}}catch(e){return i.error(e),{}}}function Ld(t){return t?["view","purchase","delayed_purchase"].includes(t):!0}function Rd(t){return t?["view","purchase"].includes(t):!0}function Dd(t){return t?t==="purchase":!0}var Fd={travel:Hn};function Bd(){let t={};return w(Fd,(e,o)=>{let r=P(`${o}`);r&&(t[o]=e(r))}),t}function Md(t){["custom_dimensions","event_id"].forEach(o=>{t[o]===void 0&&(t[o]="")})}function $d(t){return[b.PWO_DECISION,b.PWO_OPEN_ATTEMPT,b.PWO_IMPR,b.PWO_EMAIL_LEAD,b.PWO_SMS_LEAD,b.PWO_CLOSE].includes(t)}async function Kn(t,e={}){try{let o=e.page_id||Ot(),r=await Od(o);Ld(t)&&(r={...r,...Nd()},S(r,Bd(),Wn())),Dd(t)&&r.purchase_type===void 0&&(r.purchase_type=""),$d(t)&&(r={...r,...e}),Md(r),w(r,(a,u)=>{typeof e[u]<"u"&&(r[u]=e[u])}),Rd(t)||S(r,{custom_dimensions:yc()});let n=await Sc(r,t,o);return Cd({},r,n)}catch(o){return i.error(o),{}}}var Ud=500,Jn={},Yn={};function Xn(){Yn={},Jn={}}function Cc(t){return Yn[t]||0}function Vd(t){let e=!1,o=t==="view"?1:L(`config.events.${t}.dedupe.limit_per_page`);return o&&(e=Cc(t)>=o),e?"limit_per_page":""}function qd(t,e){return t.startsWith("datalayer-")||[b.PREDICTIVE_BUTTON,b.KLAVIYO_OPEN].includes(t)?"":e-(Jn[t]||0)<Ud?"debounce":""}async function Gd(t,e,o){try{let r="",n=e.event_id,a=L(`config.events.${t}.dedupe.time_threshold`);if(n||a){let u=await Q(on)||{},s=u[t]||{};a&&o-(s.time||0)<parseInt(a,10)&&(r="time_threshold"),!r&&n&&n===s.id&&(r="repeat_id"),r||(u[t]={time:o,id:n},gt(on,u))}return r}catch(r){return i.error(r),""}}async function Nc(t,e){try{let o=Date.now(),r=qd(t,o)||Vd(t)||await Gd(t,e,o);return r||(Yn[t]=Cc(t)+1,Jn[t]=o),r}catch(o){i.error(o);return}}var zn="EventsAPI";async function O(t,e,o,r){try{let n=`https://api.blackcrow.ai/v1/events/${t}?`;Gt(p)&&(n=`https://api.sandbox.blackcrow.ai/v1/events/${t}?`);let a=await Kn(t,e),u=await Nc(t,a);if(u){i.error(new lt(`Duplicate ${t}: ${u}`,zn));return}let s=JSON.stringify(a),c={servletName:zn,method:"POST",cache:"no-cache",body:s};z(`request: ${t}`,{body:s}),V(n,c,o,r)}catch(n){i.error(new lt(n,zn))}}function Oc(t){let e="https://api.blackcrow.ai/v1/events/platform?";Gt(p)&&(e="https://api.sandbox.blackcrow.ai/v1/events/platform?");let o=JSON.stringify(t);Qt(e,o)}var h={START:"start",SESSION:"session",SET:"set",EXTEND:"extend",REFRESH:"refresh",PARTNER_EVENT:"partner_event",VIEW:"view",VIEW_RESPONSE:"view_response",PURCHASE:"purchase",SCORES_UPDATE:"scores_update",PWO_IMPR:"pwo_impression",PWO_EMAIL_LEAD:"pwo_email_lead",PWO_SMS_LEAD:"pwo_sms_lead",PWO_CLOSE:"pwo_close",PWO_OPEN_ATTEMPT:"pwo_open_attempt",OVERRIDES:"overrides",CLEAR_OVERRIDES:"clear_overrides",DISCOUNT_APPLIED:"discount_applied",DISCOUNT_INTERACTION:"discount_interaction",OUT_OF_STOCK:"out_of_stock",CA_CART_CHECKOUT:"ca_cart_checkout",CA_PAYMENT:"ca_payment",CA_SHIPPING_EXIT:"ca_shipping_exit",HEADER_CLICK:"header_click",KLAVIYO_OPEN:"klv_open",KLAVIYO_CLOSE:"klv_close",KLAVIYO_LEAD:"klv_lead",PAYMENT_METHOD_CLICK:"payment_method_click",PREDICTIVE_BUTTON:"predictive_button",EXIT_INTENT:"exit_intent",RB_ACTIVE:"rb_active",PRED_WELCOME_PLATFORM_LOADED:"pred_welcome_platform_loaded",ADD_TO_CART:"add_to_cart",INITIATE_CHECKOUT:"initiate_checkout"};var Wd=["purchase","referral","call","update_account"],Hd=["purchase","referral","call"];function Lc(t){return Wd.indexOf(t)!==-1}function jd(t){let e=t.trigger,o=t.data||{};e==="call"&&(o.purchase_type="call"),Hd.indexOf(e)!==-1&&(e=b.PURCHASE),O(e,o)}function Rc(){x("platform",h.PARTNER_EVENT,jd)}function Qn({appName:t,eventName:e,data:o,sendFn:r}){let n={namespace:f,app_name:t,event_name:e,data:o};if(r)r(n,"*");else try{window.top.postMessage(n,"*")}catch(a){if(a instanceof DataCloneError)i.error(new Ft("Attempting to post invalid message object"));else throw a}}var Kd=tt("bound_events"),Jd=tt("triggered_events");function st(t,e,o,r){r=r||{},r.noCache||Jd.push(`${t}.${e}`,{data:o,onExec:r.onExec});let n=Kd.get(`${t}.${e}`);w(n,a=>{Ye(a,o,r.onExec)}),r.postMessage&&Qn({appName:t,eventName:e,data:o})}function C(t,e=()=>{},o=9,r=300,n=!1){try{return t()}catch(a){return o?_.setTimeout(()=>C(t,e,o-1,n?r*2:r,n),r):e(a)}}function Yd(){E()||(i.postMessageEventListener&&_.removeListener(window,"message",i.postMessageEventListener),i.postMessageEventListener=t=>{let e=t.data||{};e.namespace===f&&(z(`trigger: ${e.event_name}`,e.data),st(e.app_name||"platform",e.event_name,e.data))},_.addListener(window,"message",i.postMessageEventListener))}function Ce(t){if(!t)return;let e=t.app_name||"platform",o=t.data,r=t.trigger;if(r){z(`trigger: ${r}`,t),r===h.EXTEND?Go(o):r===h.SET?Wo(o):Lc(r)?st(e,h.PARTNER_EVENT,t):st(e,r,o);return}let n=t.bind;if(n){z(`bind: ${n}`,t),x(e,n,t.callback,{origEvent:t});return}z("unrecognized",t)}function Dc(){w(d,t=>{Ce(t)})}function Fc(){return C(()=>Yd(),t=>i.error(t)),Ce}function Zn(){Fc(),i.push=Ce,i.history=Ns}var Bc="IntentProperties";function Ht(t){return t?v(window[Bc],t):window[Bc]}function ti(){let t=Ht();if(t){let e={page_id:t.page_id,visitor_id:t.visitor_id||t.publisher_user_id,member_id:t.member_id,user_is_logged_in:t.is_logged_in_user,user_has_subscription:t.user_has_subscription,page_url:t.page_url,page_referrer_url:t.page_referrer_url,page_title:t.page_title,referrer_source:t.referrer_source,site_currency:t.site_currency,site_country:t.site_country,site_language:t.site_language,site_name:t.site_name,traffic_groups:t.traffic_groups,custom_1:t.site_custom_1,custom_2:t.site_custom_2,custom_3:t.site_custom_3,custom_4:t.site_custom_4,custom_5:t.site_custom_5,custom_6:t.site_custom_6,custom_7:t.site_custom_7};t.cart&&(e.cart=t.cart),t.travel&&(e.travel=S({},{start_date:t.travel.start_date,end_date:t.travel.end_date,origin_airport:t.travel.origin_airport,destination_airport:t.travel.destination_airport,travelers:t.travel.travelers})),Ce({trigger:h.EXTEND,data:e})}}var Xd=tt("bound_events"),zd=tt("triggered_events");function ei(){Xd.clear(L("config.clearBindings")),zd.clear()}function oo(){let t=v(window,"Shopify.checkout.total_tax");if(t)return t;let e=document.querySelectorAll("[data-checkout-total-taxes-target]");return e.length?e[0].textContent.startsWith("$")?e[0].textContent.trim().substring(1):e[0].textContent.trim():"0.00"}function N(t){/complete|interactive|loaded/.test(document.readyState)?t():_.addListener(document,"DOMContentLoaded",()=>{t()})}function Qd(){return{total_price:Ht("total_price"),coupon:Ht("coupon"),shipping_method:Ht("shipping_method"),shipping_price:Ht("shipping_price"),zip_code:Ht("zip_code")}}function Mc(){let t=Ac(),e={custom_dimensions:{tax_amount:window.Shopify?oo():void 0},total_price:window.cart_json?.total_price};return S({},t,e)}function Zd(){window.IntentProperties&&Go(Qd()),U(Ss,!0,1051200),O(b.PURCHASE,Mc())}function oi(){L("page.log_purchase")&&(Zd(),N(()=>{O(b.DELAYED_PURCHASE,Mc())}))}function Uc(t){_.addListener(window,"message",e=>{if(e.origin&&e.origin.indexOf(".attn.tv")>0){let o=e.data.__attentive||{};o&&o.phone&&t(`+1${o.phone}`)}})}function Vc(t){let e=document.getElementById("continue_button"),o=document.querySelectorAll("input[type=tel]");e&&o&&_.addListener(e,"click",()=>{if(o[0]){let r=o[0].value;t(r)}})}function qc(){return v(window,"Shopify.checkout.phone")}function Gc(){let t=v(window,"_learnq");if(t&&typeof t.identify=="function")return t.identify().$phone}function tl(t){let e=t.match("\\+")?t:`+1${t}`;return e=e.replace(/^(\+)|\D/g,"$1"),e}function el(t){return new RegExp(/^\+\d{10,14}$/g).test(t)}function ri(t){let e=tl(t);return el(e)?oe(e):void 0}function er(t){let e=ri(t);e&&gt($o,e)}function ol(t,e=()=>{}){t.value&&e(t.value)}var $c='input[type="tel"], input[autocomplete~="tel"], input[type="text"][id*="phone" i], input[type="text"][name*="phone" i]';function Wc(t=()=>{}){let e=Xe($c);w(e,o=>{ol(o,t)}),_.addListener(document,"focusout",o=>{let r=o.target;if(r.matches($c)){let n=r.value;n&&t(n)}})}function Hc(t){let e=qc()||Gc();e&&t(e),Uc(o=>{t(o)}),Vc(o=>{t(o)}),Wc(o=>{t(o)})}function jc(t=()=>{}){let e=qc()||Gc();return e?(er(e),t()):(Uc(o=>{er(o)}),Vc(o=>{er(o)}),Wc(o=>{er(o),t()})),e}async function or(){try{let t=await Q($o)||await F($o);return t?ge(t):void 0}catch(t){i.error(t);return}}function rl(t){let e=document.getElementById("continue_button"),o=document.getElementById("checkout_shipping_address_first_name"),r=document.getElementById("checkout_shipping_address_last_name");e&&o&&r&&_.addListener(e,"click",()=>{t(o.value,r.value)})}function Kc(){rl((t,e)=>{gt(cn,oe(t)),gt(fn,oe(e))})}async function Jc(){try{let t=await Q(cn);return t?ge(t):void 0}catch(t){i.error(t);return}}async function Yc(){try{let t=await Q(fn);return t?ge(t):void 0}catch(t){i.error(t);return}}function nl(t){if(t)return t.replace(/['.,/#!$%^&*;:{}=\-_`~()]/g,"")}function rr(t){let e=nl(t);return e?oe(e):void 0}function il(t,e){let o=t[e];if(o){let{first_name:r,last_name:n}=o;if(n){let a={fn:r,ln:n};return r&&(a.fln=`${r} ${n}`),S({},a)}}}function Xc(){let t=[],e=It()&&v(window,"Shopify.checkout");return e&&["billing_address","credit_card","shipping_address"].forEach(o=>{let r=il(e,o);r&&t.push(r)}),t.length?t:void 0}function Rt(t,e){let o=document.createElement(t);return Object.keys(e).forEach(n=>{o[n]=e[n]}),o}function zc(t,e){let o=encodeURIComponent(t);return e&&(o=o.replace(/%2C/g,",")),o}function ct(t,e=!0){let o=[];return w(t,(r,n)=>{if(r!=null&&r!==""){let a=typeof r;a==="function"?r=r.name:a==="object"&&(Array.isArray(r)?r=r.toString():r=JSON.stringify(r)),o.push(`${zc(n,e)}=${zc(r,e)}`)}}),o.join("&")}function ni(t){if(!t||!crypto||!crypto.subtle||typeof crypto.subtle.digest!="function")return Promise.resolve(void 0);let e=new TextEncoder().encode(t);return crypto.subtle.digest("SHA-256",e).then(o=>Array.from(new Uint8Array(o))).then(o=>o.map(r=>r.toString(16).padStart(2,"0")).join(""))}function nr(t){let e=Object.keys(t).map(o=>ni(t[o]).then(r=>{t[o]=r}));return Promise.all(e).then(()=>S({},t))}var al="facebook_ads";async function ii(){try{let t=await or(),e={em:await pt(),ph:t&&t.replace(/\D/g,""),fn:await Jc(),ln:await Yc()};return S({},e)}catch(t){return i.error(t),{}}}async function Qc(t,e,o){try{let r=`https://www.facebook.com/tr?id=${t}&ev=${e}`,n=await ii(),a=await nr(n),u=await F(Zt);return w(a,(s,c)=>{r+=`&ud[${c}]=${s}`}),w(o,(s,c)=>{r+=`&cd[${c}]=${s}`}),u&&(r+=`&fbp=${u}`),r}catch(r){return i.error(r),`https://www.facebook.com/tr?id=${t}&ev=${e}`}}function Zc(t,e,o){return Qc(t,e,o).then(r=>{let n=Rt("img",{width:1,height:1,src:r});n.style.display="none",document&&document.body&&typeof document.body.append=="function"&&document.body.append(n)})}function ai(t,e,o,r){return Qc(t,e,o).then(n=>{n+="&",n+=ct({dl:I(),rl:document.referrer}),C(()=>{q(n,{method:"GET"},r,a=>{throw a})},a=>i.error(new Error(`${al} api call failed with message ${a.message}`)),9,300,!0)})}var ie="measure";function R(t,e="|"){return t.filter(o=>o!=null&&o!=="").join(e)}function B(t){let e=Number(t);return isNaN(e)?t:e}function tf(t){let e=`${t}`;return e.length===1?`0${e}`:e}function ir(t,e=""){if(t)return`${t.getFullYear()}${e}${tf(t.getMonth()+1)}${e}${tf(t.getDate())}`}function ar(){return window.ShopifyAnalytics&&window.ShopifyAnalytics.lib&&window.ShopifyAnalytics.lib.config&&window.ShopifyAnalytics.lib.config["Facebook Pixel"]&&window.ShopifyAnalytics.lib.config["Facebook Pixel"].conversionsAPIEnabled}var A="Integration not available";var ef=0;function ro(){return ef+=1,ef}function si(t,e){return typeof t=="string"&&typeof e=="string"?t.localeCompare(e,void 0,{sensitivity:"accent"})===0:t===e}function ci(t,e="PWO",o=["formBuckets","overlayBuckets","overlayBuckets_triggerBuckets","overlayBuckets_triggerBuckets_formBuckets"]){if(t?.overlaySetting===void 0||t?.overlaySetting===null)return t;let r=dt(I());function n(u,s){let c,l;if(Array.isArray(u)&&u.length){let g=JSON.parse(JSON.stringify(u));typeof g[0].percent!="number"&&o.includes(s)&&(g[0].percent=1),typeof g[0].percent=="number"&&(c=`${e}_${s}`,l=g.map(y=>({percent:y.percent,value:{...y}})))}if(c&&l){let g=e,y=u.short_name||s;return G({name:c,allocations:l,force:r[`bcai_${g}_${y}`]})}return u}function a(u,s){if(u==null)return u;let c=Array.isArray(u)?[]:{},l;return Object.keys(u).forEach(g=>{let y=s?`${s}_${g}`:g;l=n(u[g],y),c[g]=typeof l=="object"?a(l,y):l}),c}return{...t,overlaySetting:a(t.overlaySetting)}}function of(t){let e=t?.formBuckets?.formConfig;return t?.overlayBuckets?.triggerBuckets?.formBuckets?.formConfig!==void 0&&Object.keys(t.overlayBuckets.triggerBuckets.formBuckets.formConfig).length>0&&(e=t.overlayBuckets.triggerBuckets.formBuckets.formConfig),{formId:me(ot()).deviceType==="mobile"?e?.mobile:e?.desktop,profile:e?.profile}}function sl(t){let e=I()?.toLowerCase();return e&&t?.length?t.find(o=>e.match(o.toLowerCase())):!1}function cl(t,e){let o=t.filter(n=>si(n.app,e));return o.length?o.find(n=>sl(n.allowedUrlPatterns))||o.find(n=>!n.allowedUrlPatterns?.length)||{}:{}}function jt(t){if(t){let e=L("apps")||[];if(e)return cl(e,t)}return{}}function sr(t){let e=jt(t).platforms||[],o=[];return e.forEach(r=>{o.push(r.platform.toLowerCase())}),o}function $(t,e){if(t&&e){let o=jt(t);if(o)return(o.platforms||[]).find(a=>si(a.platform,e))||{}}return{}}function _e(t){return t?ci(jt(t),t).overlaySetting||{}:{}}function he(t){return t?jt(t).identitySetting||{}:{}}function no(t,e){let o=he(t).platforms?.filter(a=>a.platform?.toLowerCase()===e),r=[],n=I();return n&&(r=o?.filter(a=>a.allowedUrlPatterns?.some(u=>n.includes(u)))),r.length||(r=o?.filter(a=>!a.allowedUrlPatterns?.length)),r}function T(t){let e=new Error(t);return e.name="GlobalInterfaceError",e.status="warn",e.stack=j(e.stack,1),e}function fi(){(function(t,e,o,r,n,a,u){t.fbq||(n=t.fbq=function(){n.callMethod?n.callMethod.apply(n,arguments):n.queue.push(arguments)},t._fbq||(t._fbq=n),n.push=n,n.loaded=!0,n.version="2.0",n.queue=[],a=e.createElement(o),a.async=!0,a.src=r,u=e.getElementsByTagName(o)[0],u.parentNode.insertBefore(a,u))})(window,document,"script","https://connect.facebook.net/en_US/fbevents.js")}function cr(t){return e=>{e.message===A?i.error(new T(t)):i.error(e)}}function fr(t,e){E()||(fi(),window.fbq("init",t,e))}var Ne="facebook_ads",nf="trackCustom";function af(t,e){window.fbq("init",t,e),_f({location:"init"},"FB init event not sent")}function sf(t){if(typeof window.fbq!="function"||typeof window.fbq.getState!="function")throw new Error(A);if(typeof window.fbq.getState().then=="function")window.fbq.getState().then(({pixels:e})=>{e&&e.length>0&&t(e)});else if(window.fbq.getState().pixels&&window.fbq.getState().pixels.length>0)t(window.fbq.getState().pixels);else throw new Error(A)}function ur(){return L("facebookAccounts")||[]}function cf(t){return t===void 0?ar():t}function ui(){return R([f,"validation"])}function ff(t,e){t.forEach(o=>{let r=o.pixelId,n=o.advancedMatching;if(r){let a=cf(n)?e:{};E()?ai(r,ui(),a):af(r,a)}})}function fl(t,e,o){let r=ur();r.length&&ff(r,e),o()}function ul(t,e,o){fi();let r=ur();function n(){sf(a=>{a.forEach(u=>{cf()&&af(u.id,e)})})}C(()=>{if(typeof window.fbq!="function")throw new Error(A);r.length?ff(r,e):n(),o()},cr(`${Ne} globals not found`))}function uf(t,e,o){return function(){typeof t=="function"&&t(Ne,{eventName:e,eventObject:o})}}function pf(t,e,o,r){let n=uf(r,e,o),a=ur();a.length&&a.forEach(u=>{let s=u.pixelId;ai(s,e,o,n)})}function mf(t,e,o,r){let n=uf(r,e,o);sf(()=>{window.fbq(nf,e,o),n()})}function pl(t,e){ur().forEach(r=>{let n=r.pixelId;n&&Zc(n,t,e)})}function df(t,e,o,r){return n=>(pl(t,e),typeof r=="function"&&r(`${Ne}`,{eventName:t,eventObject:e},"score_push_img_pixel"),o(n))}function ml(t){return`${f}_${t}`}function dl(t,e,o){let r;return t===ie?r=R([f,o],"_"):r=R([e,o]),r}function ll(t,e){return{app_name:t,integration_product:e.integration_product,conversion_product:e.conversion_product,conversion_type:e.conversion_type,comparison_population:e.comparison_population,comparison_group:e.comparison_group,comparison_type:e.comparison_type,threshold_setter:e.threshold_setter,threshold_group_count:e.threshold_group_count,score:B(e.score),event_date:ir(new Date,"-"),eventDate:ir(new Date)}}function lf(t,e){let o=ml(t);return{eventName:dl(t,o,e.integration_product),eventObject:ll(o,e)}}function gl(t,e,o){if(!t)return;let r=lf(e,t);pf(e,r.eventName,r.eventObject,o)}function _l(t,e,o){if(!t)return;let r=lf(e,t),n=r.eventName,a=r.eventObject;C(()=>mf(e,n,a,o),df(n,S({},a,{eventHitId:ro()}),cr(`${Ne} globals not found`),o),80,150)}function gf(){let t=$("target",Ne);return t&&Object.keys(t).length>0}function hl(t){if(gf()){let e=ui();pf("target",e,S({},t,{eventHitId:ro()}))}}function _f(t,e){if(gf()){let o=ui();C(()=>mf("target",o,S({},t,{eventHitId:ro()})),df(o,S({},t,{eventHitId:ro()}),cr(e),80,150))}}function yl(t,e,o){E()?gl(t,e,o):_l(t,e,o)}async function rf(t,e){try{let o=await ii();E()?fl(t,o,e):ul(t,o,e)}catch(o){i.error(o)}}function El(t,e){E()?hl(t):_f(t,e)}var Ut={eventHitType:nf,name:Ne,identify:rf,setup:rf,send:yl,sendValidationEvent:El};var At="audience";function _t(t){return vn(`apps.${t}`)}var hf="o",yf=`${f}_audience|score_update`,pi=`${f}_score`,Ef=`contextData.${pi}`;function H(t,e){return(o,r,n)=>{if(!o)return;function a(u){u.message===A?i.error(new T(`${t} globals not found`),{appName:r}):i.error(u)}C(()=>e(o,r,n),a)}}var mi="adobe_analytics";function vl(t,e,o){let r=v(window,"s.tl");if(typeof r=="function"){let n={contextData:{[pi]:B(t.score)},linkTrackVars:Ef};r(!0,hf,yf,n),typeof o=="function"&&o(mi,n);return}throw new Error(A)}var di={name:mi,send:H(mi,vl)};var wf="event";var li="dynamic_yield";function Sl(t){return t==="1"?"low":t==="2"?"medium":"high"}function Il(t,e,o){let r=v(window,"DY.API"),n;t.threshold_group_count==="3"&&(n=Sl(t.score));let a=R([f,t.comparison_group.toLowerCase(),n||`score_${t.score}`]);if(typeof r=="function"){let u=B(t.score);r(wf,{name:a,properties:{}}),typeof o=="function"&&o(li,{EVENT_PREFIX:`${f}_${e}`,score:u})}else throw new Error(A)}var gi={name:li,send:H(li,Il)};function io(t){let e=new Error(t);return e.name="ConfigDataError",e.status="warn",e.stack=j(e.stack,1),e}var Sf="event",ao="owox",pr=[];function Al(t){let e=te();if(e)t(e);else throw new Error(A)}function vf(t,e,o,r){t.cid=e,t.z=Date.now(),q(`https://google-analytics.bi.owox.com/${o}?${ct(t)}`,{method:"GET"},()=>r(ao,t))}function xl(t,e,o){let r=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,a=$(e,ao).tracking_id;if(typeof r=="function"){let u=_.setTimeout(()=>{i.error(new T(`${ao} ready hook not fired`))},5e3);r(s=>{if(clearTimeout(u),a=a||s&&s.get("trackingId"),a||w(r.getAll(),c=>{let l=c.get("trackingId");if(l)return a=l,!1}),a){if(!t)return;let c=`${f}_${e}`,l=R([c,t.integration_product,t.conversion_product,t.conversion_type]),g=R([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]);pr.push({v:1,ni:1,t:Sf,tid:a,dl:I(),ec:l,ea:g,el:B(t.score)}),Array.isArray(pr)&&C(()=>Al(y=>{let k=pr;pr={push:M=>{vf(M,y,a,o)}},k.forEach(M=>{vf(M,y,a,o)})}))}else i.error(new io(`${ao} tracking id not found`))})}}var _i={eventHitType:Sf,name:ao,send:xl};var bl=G({name:"kpi_sampling",allocations:[{percent:.1,value:!0}]});function Kt(t,e,o){bl&&X(`${o} ${e}`,{"evt.name":o,"evt.integration":e,appName:t,"usr.id":be().id,"view.url":P("page_url")||I(),"view.referrer":P("page_referrer_url")||ut()})}var hi={[di.name]:di,[gi.name]:gi,[_i.name]:_i};function yi(t,e,o){Kt(At,t,e),z(`${At} ${e}: ${t}`,o)}function Pl(t,e){hi[t]!==void 0&&e&&w(e,o=>{o.name&&hi[t].send(o,At,(r,n)=>{yi(r,"score_push",n)})})}function Tl(){let t=_t(`${At}.scores`);t&&t.length&&st(At,h.SCORES_UPDATE,t,{onExec:()=>{yi(p,h.SCORES_UPDATE,t)}});let e=t?t[0]:null;if(e){let o={score:parseInt(e.score,10),comparison_group:e.comparison_group,threshold_group_count:e.threshold_group_count};st(At,"score_update",S({},o),{onExec:()=>{yi(p,"score_update",o)}})}}function kl(t){let e=_t(`${At}.integrations`),o=[];return w(e,r=>{let n=r.platform;t[n]&&o.push(t[n].then(()=>{Pl(n,r.scores)}))}),Tl(),Promise.all(o)}var If={appName:At,platforms:hi,sendAppScores:kl};var Ei={[Ut.name]:Ut};function Cl(t,e,o="score_push"){Kt(ie,t,o),z(`${ie} ${o}: ${t}`,e)}function Nl(t,e){Ei[t]!==void 0&&e&&e.length>0?(U(We,"scored",30),w(e,o=>{o.name&&Ei[t].send(o,ie,Cl)})):U(We,"enabled",30)}function Ol(t){let e=W("blackcrow_promising_user")||"";return t==="enabled"||t===void 0&&e.toLowerCase()==="active"||t===void 0&&I().toLowerCase().indexOf("blackcrow_promising_user%3dactive")>0}async function Ll(t){try{let e=_t(`${ie}.integrations`),o=await F(We),r=[];return o==="scored"?U(We,"scored",30):Ol(o)&&w(e,n=>{let a=n.platform;t[a]&&r.push(t[a].then(()=>{Nl(a,n.scores)}))}),Promise.all(r)}catch(e){return i.error(e),Promise.resolve([])}}var Af={appName:ie,platforms:Ei,sendAppScores:Ll};var xt="pwo",mr={DELAY:"delay",SESSION_VIEW_COUNT:"page_view",EXIT_INTENT:"exit_intent"};var Vt=class{constructor(e){this.name=e}set(e,o){U(this.name,e,o)}get(){return D(this.name)}reset(){U(this.name,"",-1)}};var xf=new Vt(Is),dr=new Vt(xs),vi=new Vt(bs),wi=class{SEPARATOR="|";overlayHistoryCookie=new Vt(As);get(){let e=this.overlayHistoryCookie.get();return e?e.split(this.SEPARATOR):[]}push(e){let o=this.get();o.push(e),this.overlayHistoryCookie.set(o.join(this.SEPARATOR),30)}count(e){return this.get().filter(o=>o===e).length}totalCount(){return this.get().length}},ht=class{overlayClosedCookieDuration=30;openedOverlayEventData=[];constructor(){this.history=new wi}static overlayWasClosed(){return!!xf.get()}static piiWasSubmitted(){return!!dr.get()}static submitPII(){dr.set("true",1051200)}closeOverlay(){delete this._openOverlay}setOverlayClosedCookie(){this.isOverlayOpenedByATC()||xf.set("true",this.overlayClosedCookieDuration)}closeOverlayAndSetCookie(){this.closeOverlay(),this.setOverlayClosedCookie()}isOverlayOpen(){return!!this._openOverlay}piiWasSubmitted(){return ht.piiWasSubmitted()}setOverlayClosedDuration(e=30){this.overlayClosedCookieDuration=e}totalOverlaysOpenedCount(){return this.history.totalCount()}overlayOpenedEvent(e){e&&this.openedOverlayEventData.push(e)}handleOpenAttemptOutcome(e){let o=e?.resolved_form_id;if(o){if(!this.openedOverlayEventData.length){i.error(new Error(`[PWO] Impression failed to render for formId: ${o}`));return}if(this.openedOverlayEventData.every(n=>!n.rendered_form_id||n.rendered_form_id?.trim()==="")){X("[PWO] All rendered form Ids undefined. Could be justuno overlay.");return}if(this.openedOverlayEventData.find(n=>n.rendered_form_id===o))X("[PWO] Impression rendered successfully.");else{let n=this.openedOverlayEventData.map(a=>!a.rendered_form_id||a.rendered_form_id?.trim()===""?"<missing_id>":a.rendered_form_id);i.error(new Error(`[PWO] Impression failed to render for formId: ${o} and external impression rendered form ids: ${n}`))}}}openAttemptEvent(e){this.openedOverlayEventData=[],_.setTimeout(()=>this.handleOpenAttemptOutcome(e),5e3)}openStandardOverlay(){this._openOverlay=ht.STANDARD,this.history.push(ht.STANDARD)}standardOverlaysOpenedCount(){return this.history.count(ht.STANDARD)}openAtcOverlay(){this._openOverlay=ht.ATC,this.history.push(ht.ATC)}atcOverlaysOpenedCount(){return this.history.count(ht.ATC)}isOverlayOpenedByATC(){return this._openOverlay===ht.ATC}openExitOverlay(){this._openOverlay=ht.EXIT,this.history.push(ht.EXIT)}exitOverlaysOpenedCount(){return this.history.count(ht.EXIT)}isOverlayOpenedByExitTrigger(){return this._openOverlay===ht.EXIT}},yt=ht;Oo(yt,"STANDARD","s"),Oo(yt,"ATC","a"),Oo(yt,"EXIT","e");var lr=class{maxTotalOverlays=1/0;maxStandardOverlays=1;maxATCOverlays=1;maxExitOverlays=1;constructor(e){this.interactionTracker=e}setMaxTotalOverlays(e=1/0){this.maxTotalOverlays=e}totalOverlayLimitReached(){return this.interactionTracker.totalOverlaysOpenedCount()>=this.maxTotalOverlays}standardOverlayLimitReached(){return this.interactionTracker.standardOverlaysOpenedCount()>=this.maxStandardOverlays}canOpenStandardOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.interactionTracker.piiWasSubmitted()&&!this.standardOverlayLimitReached()&&!this.totalOverlayLimitReached()}atcOverlayLimitReached(){return this.interactionTracker.atcOverlaysOpenedCount()>=this.maxATCOverlays}canOpenAtcOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.atcOverlayLimitReached()&&!this.totalOverlayLimitReached()}exitOverlayLimitReached(){return this.interactionTracker.exitOverlaysOpenedCount()>=this.maxExitOverlays}canOpenExitOverlay(){return!this.interactionTracker.isOverlayOpen()&&!this.exitOverlayLimitReached()&&!this.totalOverlayLimitReached()}};function ye(t,e){i.push({trigger:t,data:e})}var Rl=["OPEN","EMAIL_LEAD","LEAD","CLOSE"],Si="attentive",gr={},bf,Pf=!0;var Dl={OPEN:h.PWO_IMPR,CLOSE:h.PWO_CLOSE,EMAIL_LEAD:h.PWO_EMAIL_LEAD,LEAD:h.PWO_SMS_LEAD};function Fl(t,e){bf=t?.toUpperCase(),gr={},Pf&&(Pf=!1,_.addListener(window,"message",o=>{if(o.origin&&o.origin.indexOf(".attn.tv")!==-1){let r=o.data.__attentive||{};if(r&&Rl.includes(r.action)){let{action:n,creativeId:a}=r,u=gr[a];if(u?.includes(n))return;gr[a]=u?[...u,n]:[n];let s=Dl[n];s&&ye(s,{rendered_form_id:a})}}})),C(()=>{if(typeof window.__attentive?.trigger=="function")e();else throw new Error(`${Si} globals not found`)},()=>i.error(new T(`[${bf}] ${Si} globals not found.`)),100)}function Bl(){return Promise.resolve(W("utm_source")==="attentive")}function Ml(){}function $l(t){delete gr[t],window?.__attentive?.trigger(null,null,null,t)}function Ul(t,e){let o=document.querySelectorAll("[id=overlayContainer]");if(o.length!==0){if(o.length>1)throw new Error(`[PWO] Expected exactly one matching Attentive overlay container but found ${o?.length}.`);return o[0]}}var Ii={name:Si,setup:Fl,isIdentified:Bl,triggerOverlay:$l,getOverlayNode:Ul,addAttributesToUserProfile:Ml};var Tf=["open","embedOpen","close","redirectedToUrl","submit","stepSubmit"];function Oe(){if(!window.klaviyo){window._klOnsite=window._klOnsite||[];try{window.klaviyo=new Proxy({},{get(t,e){return e==="push"?function(){let o;(o=window._klOnsite).push.apply(o,arguments)}:function(){for(var o=arguments.length,r=new Array(o),n=0;n<o;n++)r[n]=arguments[n];let a=typeof r[r.length-1]=="function"?r.pop():void 0;return new Promise(s=>{window._klOnsite.push([e].concat(r,[function(c){a&&a(c),s(c)}]))})}}})}catch{window.klaviyo=window.klaviyo||[],window.klaviyo.push=function(){let e;(e=window._klOnsite).push.apply(e,arguments)}}}}function kf(t,e,o=()=>!1,r=500){let n=D(t),a=_.setInterval(()=>{let u=D(t);if(u!==n)try{e(u),o()&&clearInterval(a)}catch(s){clearInterval(a),i.error(new Error(`Error occurred in one of the callbacks: ${s}`))}finally{n=u}},r);return a}function Et(t,e){try{window.sessionStorage.setItem(t,JSON.stringify(e))}catch{}}var _r="klaviyo",Ai="PWO",so={};function Vl(t){let e=t.type,o=t?.metaData,r=null;switch(e){case"open":r=h.PWO_IMPR;break;case"submit":o?.$email&&(r=h.PWO_EMAIL_LEAD);break;case"stepSubmit":o?.$phone_number&&(r=h.PWO_SMS_LEAD);break;case"close":r=h.PWO_CLOSE;break;default:break}return r}function ql(t){return t.overrideSampling=!0,t.message=`klaviyo_renderer: ${t.message}`,t}function Gl(t,e){return o=>{o.message===`klaviyo_renderer: ${A}`?i.error(new T(t)):i.error(o),e()}}function Cf(){Et(un,!0)}function Nf(){return Z(un).then(t=>t?!0:W("_kx")?(Cf(),!0):new Promise((e,o)=>C(()=>{let r=window._learnq?._loaded&&window?._learnq?.isIdentified||window._klOnsite?._loaded&&window._klOnsite.isIdentified||window?.klaviyo?.isIdentified;if(typeof r=="function"){let n=r();if(n!==void 0)return n===!0&&Cf(),e(n)}throw ql(new Error(A))},Gl(`[${Ai}] ${_r} could not determine whether user is identified`,o))))}function Wl(t){let e=window._learnq?._loaded&&window?._learnq?.push||window._klOnsite?._loaded&&window?._klOnsite?.push||window?.klaviyo?.push;typeof e=="function"&&e(["identify",t])}function xi(t){if(!t)return;let e=["identify",{$email:t}],o=window._learnq?._loaded&&window?._learnq?.push||window._klOnsite?._loaded&&window?._klOnsite?.push||window?.klaviyo?.push;typeof o=="function"&&o(e)}function Hl(){N(()=>{Xo(t=>{let e=Fn(t);e&&xi(e)})})}async function jl(){try{if(await Nf()===!1){let e=await pt();e?xi(e):Hl()}}catch(t){i.error(t)}}function Kl(){async function t(){try{let e=await le();e&&O("kl_purchase",{kl_cid:e})}catch(e){i.error(e)}}return Ct()==="confirmation"?(kf(qo,t,le),pt().then(e=>{let o=e||Yo();o&&xi(o)}).catch(e=>i.error(e))):jl()}function Jl(t){delete so[t],window.klaviyo.openForm(t)}function Yl(t,e){if(!e)return;let o=document.querySelectorAll(`form[data-testid=klaviyo-form-${e}]`);if(o.length===0)return;if(o.length>1)throw new Error(`[PWO] Expected exactly one matching Klaviyo form but found ${o?.length}. Form ID: ${e}`);let r=t.split(">").pop().split(".").slice(-2).filter(u=>u&&u.trim()!=="").map(u=>u.trim()),n=o[0],a=!1;for(;!a;){let u=n.parentElement.getAttribute("class")?.split(" ").filter(s=>s&&s.trim()!=="").map(s=>s.trim());a=!r.every(s=>u?.includes(s)),a||(n=n.parentNode)}return n}function Xl(t,e){Ai=t?.toUpperCase(),so={};function o(r){let n=r?.formId,a=Vl(r);function u(){return a&&so[n]?.includes(a)}function s(){let l=so[n];so[n]=l?[...l,a]:[a]}function c(){(window?._learnq?.push||window?._klOnsite?.push||window?.klaviyo?.push)(["track","Welcome Form Submit"])}u(n,a)||(s(n,a),ye(a,{rendered_form_id:n}),a===h.PWO_EMAIL_LEAD&&c())}_.addListener(window,"klaviyoForms",r=>{r.detail&&Tf.includes(r.detail.type)&&o(r.detail)}),(typeof window.klaviyo?.identify!="function"||!window._klOnsite?._loaded)&&Oe(),C(()=>{if(typeof window.klaviyo?.identify=="function"&&window._klOnsite?._loaded)Kl().then(e).catch(n=>{i.error(n),e()});else throw new Error(`${_r} globals not found`)},()=>i.error(new T(`[${Ai}] ${_r} globals not found.`)),100)}var Le={name:_r,setup:Xl,isIdentified:Nf,triggerOverlay:Jl,getOverlayNode:Yl,addAttributesToUserProfile:Wl};function co(t,e){if(typeof e!="function")return;let o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...r){try{r[1]?.match(t)&&e&&_.addListener(this,"load",()=>{this.responseType===""||this.responseType==="text"?e(this.responseText):this.responseType==="json"&&e(JSON.stringify(this.response))})}catch{i.error(new lt(`XHR Sniffer Error For URL: ${t}`))}return o.apply(this,r)}}function hr(t,e){let o=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(...r){try{r[1]?.match(t)&&e(r)}catch{i.error(new lt(`XHR Intercept Error For URL: ${t}`))}return o.apply(this,r)}}var Pi="justuno",fo={},bi;function Ti(t){return t.overrideSampling=!0,t.message=`justuno_renderer: ${t.message}`,t}function Of(t,e){return o=>{o.message===`justuno_renderer: ${A}`?i.error(Ti(new T(t))):i.error(o),e(t)}}function zl(){return window._klOnsite?._loaded||Oe(),new Promise((t,e)=>C(()=>{if(typeof window.klaviyo?.isIdentified=="function"&&window._klOnsite?._loaded)return t(Le.isIdentified());throw Ti(new Error(A))},Of(`[${bi}] ${Pi} could not determine whether user is identified (using klaviyo).`,e)))}function Ql(t){typeof window?.klaviyo?.push!="function"&&!window._klOnsite?._loaded&&Oe(),Le.addAttributesToUserProfile(t)}function Zl(t){delete fo[t],window.ju_loadiframe({campaign_id:t??""})}function tg(t,e){}function eg(t,e){fo={},bi=t?.toUpperCase();function o(a,u){return fo[a]?.includes(u)}function r(a,u){if(a){let s=fo[a];fo[a]=s?[...s,u]:[u]}}function n(a,u){o(a,u)||(r(a,u),ye(u,{rendered_form_id:a}))}E()?e():(window.juapp=window.juapp||function(){(window.juapp.q=window.juapp.q||[]).push(arguments)},hr("(justuno.com|jst.ai)/api/analytics/impression",()=>{n(void 0,h.PWO_IMPR)}),window.juapp("trackFunc","engagement",(a,u,s,c,l,g)=>{g.find(y=>y.name==="phone_number"&&y.value.length>0)?n(c,h.PWO_SMS_LEAD):a&&n(c,h.PWO_EMAIL_LEAD)}),window.ju_windowevent=(a,u)=>{a==="unload"&&n(u,h.PWO_CLOSE)},C(()=>{if(window.ju_loadiframe&&typeof window.ju_loadiframe=="function"&&window.ju_initialized)e();else throw Ti(new Error(A))},Of(`[${bi}] ${Pi} globals not found.`,e),100))}var ki={name:Pi,setup:eg,isIdentified:zl,triggerOverlay:Zl,getOverlayNode:tg,addAttributesToUserProfile:Ql};var Lf={[Ii.name]:Ii,[ki.name]:ki,[Le.name]:Le},yr=class{constructor(e){if(!e)throw new Error("[PWO] No configured overlay renderer");if(this.overlayRenderer=Lf[e.toLowerCase()],!this.overlayRenderer)throw new Error(`[PWO] Unrecognized overlay renderer: ${e}`)}setup(){return new Promise(e=>this.overlayRenderer.setup(xt,e)).catch(e=>i.error(e))}triggerOverlay(e){this.overlayRenderer.triggerOverlay(e)}getOverlayNode(e,o){return this.overlayRenderer.getOverlayNode(e,o)}get name(){return this.overlayRenderer?.name}},Er=class{constructor(e){if(!Array.isArray(e)||!e.length)throw new Error("[PWO] No configured identity platforms");if(this.identityPlatforms=e.map(o=>{let r=Lf[o?.toLowerCase()];return r||i.error(new Error(`[PWO] Unrecognized identity platform: ${o}`)),r}).filter(o=>!!o),!this.identityPlatforms.length)throw new Error("[PWO] No configured identity platforms")}isUserIdentified(){let e=this.identityPlatforms.map(async o=>{try{return o.isIdentified()}catch{return!0}});return Promise.all(e)}addAttributesToUserProfile(e){this.identityPlatforms.forEach(o=>{o.addAttributesToUserProfile(e)})}};function og(){return Number(D(an))||0}function uo(){return Number(D(sn))||0}function Rf(){let t=og();U(an,t+1,1051200);let e=uo();e<1&&st("platform",h.SESSION),U(sn,e+1,30)}function Df(t){if(me(ot()).deviceType!=="mobile")N(()=>{_.addListener(document?.documentElement,"mouseleave",t)});else{let e=de(),o=Xs();if(o>0){let r=_.setInterval(()=>{let n=e-de();n<0&&(n=0,e=de()),n/o>.3&&(clearInterval(r),t())},150)}}}function wr(t){let e=_t(`${At}.scores`)??[];return t?e.find(({name:o})=>o===t)?.score:void 0}function rg(){let e=_e(xt).excludedQueryParams;return e&&e.some(o=>W(o.name)?.toLowerCase()===o.value?.toLowerCase())}function vr(){return vi.get()?!0:rg(xt)?(vi.set(!0),!0):!1}function Ff(){let t=_e(xt),e=t?.overlayBuckets,o=of(t),r=wr(t?.overlayBuckets?.triggerBuckets?.scoreName);return e===void 0?void 0:{resolved_trigger_config:{...e},resolved_form_id:o.formId,resolved_form_profile:o.profile,resolved_score:r,version:t?.version}}function Bf(){let t=!!dr.get(),e=vr();return!(t||e)}function Mf(t){return{closed_overlay:!!yt.overlayWasClosed(),identified:t.some(e=>e===!0),pii_submitted:!!yt.piiWasSubmitted(),channel_excluded:vr()}}function Ci(t){let e={};function o(){return S({},Ff(),Mf(t),{session_page_views:uo()},e)}function r(n){S(e,n)}return{getEventData:o,extendEventData:r}}var ng={subtree:!0,childList:!0};function $f(t,e){t.style.setProperty("z-index",e,"important")}async function Uf(t,e,o,r){try{if(!t||!e||!o||!r)return;let n=r.getOverlayNode(t,o);if(n){$f(n,e);return}await new Promise((a,u)=>{let s=new MutationObserver(()=>{try{let c=r.getOverlayNode(t,o);c&&($f(c,e),s.disconnect(),a())}catch(c){s.disconnect(),u(c)}});s.observe(document.body,ng)})}catch(n){i.error(n)}}function Vf(t,e,o){if(t?.length&&e&&o){let r=t?.map(n=>Uf(n.uniqueQuerySelector,n.zIndex,e,o));return Promise.all(r)}return Promise.resolve([])}var Re,po,mo,wt=new yt,lo=new lr(wt);function ig(t){Re&&Re.extendEventData(t)}function Jt(){return Re?.getEventData()||{}}function Gf(){return Jt()?.resolved_trigger_config?.name}function ag(){Re=void 0}function sg(t){return{resolved_form_id:t.form_id,resolved_form_profile:t.form_profile,trigger_type:t.trigger_type,trigger_count:t.trigger_count,pwo_response_overlay_eligible:t.overlay_eligible}}function cg(){wt.closeOverlay(),ag()}function fg(t){return!wt.isOverlayOpen()&&t.overlay_eligible&&t.trigger_type&&t.trigger_count>-1&&t.trigger_count!==null}function Ni(t){i.push({trigger:h.PWO_OPEN_ATTEMPT}),po.triggerOverlay(t.form_id),mo.addAttributesToUserProfile({blackcrow_exposed_population_bucket:Gf(),bcai_trigger:t.trigger_type,profile:t.form_profile})}function Wf(t){return mo.isUserIdentified().then(o=>{!o.some(n=>n===!0)&&lo.canOpenStandardOverlay()&&(wt.openStandardOverlay(),Ni(t))})}function Hf(t,e){let o=po.name??"unknown";i.error(new Error(`[${xt.toUpperCase()}] error when triggering overlay for creative "${t?.form_id}" on ${o} due to error "${e.message}".`))}function qf(t){let e=()=>Wf(t).catch(o=>Hf(t,o));_.setTimeout(e,t.trigger_count*1e3)}function ug(t){uo()>=t.trigger_count&&Wf(t).catch(o=>Hf(t,o))}function pg(t){function e(){if(t.overlay_eligible){let o=Jt();return!o.channel_excluded&&!o.identified&&!o.pii_submitted}return!1}return e()&&lo.canOpenAtcOverlay()}function mg(t){Jt()?.resolved_trigger_config?.triggerBuckets?.showOverlayOnATC&&x("platform",h.ADD_TO_CART,()=>{pg(t)&&(wt.openAtcOverlay(),Ni(t))})}function dg(t){let e=t?.apps?.pwo;if(e){ig({...sg(e)});let o=Gf();if(mo.addAttributesToUserProfile(S({},{blackcrow_all_population_bucket:o,blackcrow_eligible_population_bucket:e?.overlay_eligible?o:void 0})),mg(e),fg(e))switch(e.trigger_type){case mr.DELAY:qf(e);break;case mr.SESSION_VIEW_COUNT:ug(e);break;case mr.EXIT_INTENT:x("platform",h.EXIT_INTENT,()=>{lo.canOpenExitOverlay()&&qf(e)});break;default:}}else i.error(new Error(`[${xt.toUpperCase()}] missing "pwo" in response: ${JSON.stringify(t)}`))}function lg(t,e){return O(t,e,o=>{dg(o)}),{eventName:t,eventData:e}}async function gg(t){try{if(t.renderer&&t.isIdentified&&Sn()){await t.renderer;let e=await t.isIdentified;Re=Ci(e),await lg(b.PWO_DECISION,Re.getEventData())}}catch(e){i.error(e)}}function _g(){st("platform",h.EXIT_INTENT)}function Sr(t,e=!1){let o=wt.isOverlayOpen(),r=t?.rendered_form_id?.trim(),n=o&&(r===t?.resolved_form_id||e&&!r);return S(t,{bcai_triggered:n,overlay_triggered_by_atc:n&&wt.isOverlayOpenedByATC(),overlay_triggered_by_seu:n&&wt.isOverlayOpenedByExitTrigger()})}function hg(){x("platform",h.VIEW_RESPONSE,()=>{Sn()&&(x("platform",h.PWO_CLOSE,e=>{let o=Sr(S({},e,Jt()));O(b.PWO_CLOSE,o),o.bcai_triggered&&(wt.closeOverlay(),wt.setOverlayClosedCookie())}),x("platform",h.PWO_EMAIL_LEAD,e=>{yt.submitPII(),O(b.PWO_EMAIL_LEAD,Sr(S({},e,Jt())))}),x("platform",h.PWO_SMS_LEAD,e=>{yt.submitPII(),O(b.PWO_SMS_LEAD,Sr(S({},e,Jt())))}),x("platform",h.PWO_IMPR,e=>{let o=Sr(S({},e,Jt()),!0);wt.overlayOpenedEvent(o),O(b.PWO_IMPR,o),o.bcai_triggered&&o.overlay_triggered_by_atc&&Vf(_e(xt)?.styleSettings,o?.rendered_form_id,po)}),x("platform",h.PWO_OPEN_ATTEMPT,e=>{let o=S({},e,Jt());wt.openAttemptEvent(o),O(b.PWO_OPEN_ATTEMPT,o)}),_e(xt)?.overlayBuckets?.triggerBuckets?.showSecondOverlayOnExitIntent&&x("platform",h.EXIT_INTENT,()=>{let e=Jt();lo.canOpenExitOverlay()&&Bf()&&!e.identified&&(wt.openExitOverlay(),Ni({trigger_type:h.EXIT_INTENT,form_id:e.resolved_form_id,form_profile:e.resolved_form_profile}))}))})}function yg(){let t={},e=_e(xt),o=e.renderer?.toLowerCase();if(E())i.error(new T("[PWO] Disabled while running in WebPixelManager."));else if(o===void 0)i.error(new Error("[PWO] No configured overlay renderer"));else{vr();let r=e.identifyPlatforms;try{po=new yr(o),mo=new Er(r||[o]),wt.setOverlayClosedDuration(e?.overlayClosedCookieDuration),lo.setMaxTotalOverlays(e?.overlayBuckets?.triggerBuckets?.maxTotalOverlays),t.isIdentified=mo.isUserIdentified(),t.renderer=po.setup(),hg(),Df(_g)}catch(n){i.error(n)}}return t}var jf={appName:xt,init:yg,sendAppScores:gg,cleanup:cg};var Oi="cordial";function Eg(t,e,o){let r=`${f}`,n=R([r,t.integration_product]),a=v(window,"crdl");if(typeof a=="function"){let u={app_name:e,integration_product:t.integration_product,conversion_product:t.conversion_product,conversion_type:t.conversion_type,comparison_population:t.comparison_population,comparison_group:t.comparison_group,comparison_type:t.comparison_type,threshold_setter:t.threshold_setter,threshold_group_count:t.threshold_group_count,score:B(t.score)};a("event",n,u),typeof o=="function"&&o(Oi,n)}else throw new Error(A)}var Li={name:Oi,send:H(Oi,Eg)};var go=window.GoogleAnalyticsObject||"ga";window[go]=window[go]||function(){(window[go].q=window[go].q||[]).push(arguments)};var jO=window[go];window.dataLayer=window.dataLayer||[];function wg(){return typeof window.gtag=="function"?window.gtag.toString()!=="function () { }":!1}var Ee=wg()?window.gtag:function(){window.dataLayer.push(arguments)};function Kf(t,e){let o=document.createElement("script");o.src=`https://www.googletagmanager.com/gtag/js?id=${t}`,o.async=!0,document.getElementsByTagName("head")[0].appendChild(o),Ee("js",new Date),Ee("config",t,e)}async function _o(){try{return(await F("_ga"))?.split(".")?.slice(-2).join(".")}catch(t){i.error(t);return}}async function Ri(t,e){try{if(E()){let r=$(t,e).tracking_id,n=await _o();return r!=null&&r.startsWith("UA-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let o=!1;return w(window.dataLayer,r=>{r[0]==="config"&&r[1]&&r[1].indexOf("UA-")===0&&(o=!0)}),o}return!1}catch(o){i.error(o);return}}async function Di(t,e){try{if(E()){let r=$(t,e).tracking_id,n=await _o();return r!=null&&r.startsWith("G-")&&n!==void 0}if(Array.isArray(window.dataLayer)){let o=!1;return w(window.dataLayer,r=>{r[0]==="config"&&r[1]&&r[1].indexOf("G-")===0&&(o=!0)}),o}return!1}catch(o){i.error(o);return}}function De(t,e={}){!E()&&t&&Kf(t,e)}async function Ir(t,e,o){try{let r=await J(o),n=no(t,e),a=r.length?r[0].value:void 0;n.forEach(u=>{let s=u.pixelId,c=u.loadPixel===!0;s&&a&&c&&De(s,{user_id:a})})}catch(r){i.error(r)}}var Ar="event",mt="google_analytics",vg="https://www.google-analytics.com/collect",Sg="https://www.google-analytics.com/g/collect";function Ig(t,e){let o=$(t,mt)?.tracking_id;De(o,{send_page_view:!1}),e()}async function Ag(t,e,o,r,n){try{let a=new URL(vg);a.search=ct({v:1,t:Ar,tid:t,cid:await _o(),ec:e,ea:o,el:r,ua:ot(),dl:I(),dt:document.title,ni:1}),q(a.toString(),{method:"GET",mode:"cors"},n)}catch(a){i.error(new Error(`${mt} api call failed with ${a}`))}}async function xg(t,{onSuccess:e,eventPrefix:o,integrationProduct:r,conversionProduct:n,conversionType:a,comparisonType:u,thresholdSetter:s,thresholdGroupCount:c,comparisonPopulation:l,score:g}){try{let y=new URL(Sg);y.search=ct({v:2,tid:t,en:Ar,cid:await _o(),dl:I(),dt:document.title,ep:{app_name:o,integration_product:r,conversion_product:n,comparison_population:l,comparison_type:u,conversion_type:a,threshold_setter:s,threshold_group_count:c,non_interaction:!0},epn:{score:g}}),q(y.toString(),{method:"POST",mode:"cors"},e)}catch(y){i.error(new Error(`${mt} api call failed with ${y}`))}}function Jf(t,e,o,r,n,a,u,s,c){let l={};return l.category=R([t,e,o,r]),l.action=R([n,a,u,s]),l.label=c,l}async function bg(t,{onSuccess:e,eventPrefix:o,integrationProduct:r,conversionProduct:n,conversionType:a,comparisonType:u,thresholdSetter:s,thresholdGroupCount:c,comparisonPopulation:l,score:g}){try{let Xt=function(){typeof e=="function"&&e(mt,{eventCategory:Pt,eventAction:Mt,eventLabel:ce})};var y=Xt;let k=$(t,mt);if(k.pageBlocked)return;let M=window.GoogleAnalyticsObject?window[window.GoogleAnalyticsObject]:window.ga,ft=Jf(o,r,n,a,u,s,c,l,g),Pt=ft.category,Mt=ft.action,ce=ft.label,zr=await Ri(t,mt),qe=await Di();if(zr)Ee("event",Mt,{event_category:Pt,event_label:ce,non_interaction:!0}),Xt();else if(qe){let Co=R([o,r],"_");Ee("event",Co,{non_interaction:!0,app_name:o,integration_product:r,conversion_product:n,conversion_type:a,comparison_population:l,comparison_type:u,threshold_setter:s,threshold_group_count:c,score:g}),Xt()}else if(typeof M=="function"){let Co=_.setTimeout(()=>{i.error(new T(`${mt} ready hook not fired`))},5e3);M(ls=>{if(clearTimeout(Co),!(ls&&ls.get("trackingId"))){let No=k.tracking_id;No||w(M.getAll(),om=>{let gs=om.get("trackingId");if(gs)return No=gs,!1}),No?M("create",No,"auto"):i.error(new io(`${mt} tracking id not found`))}M("send",{hitType:Ar,eventCategory:Pt,eventAction:Mt,eventLabel:ce,nonInteraction:!0}),Xt()})}else throw new Error(A)}catch(k){i.error(k)}}async function Pg(t,{onSuccess:e,eventPrefix:o,integrationProduct:r,conversionProduct:n,conversionType:a,comparisonType:u,thresholdSetter:s,thresholdGroupCount:c,comparisonPopulation:l,score:g}){try{let Mt=function(){typeof e=="function"&&e(mt,{eventCategory:M,eventAction:ft,eventLabel:Pt})};var y=Mt;let k=Jf(o,r,n,a,u,s,c,l,g),M=k.category,ft=k.action,Pt=k.label,ce=await Ri(t,mt),Xt=await Di(t,mt);if(ce){let qe=$(t,mt).tracking_id;Ag(qe,M,ft,Pt,Mt)}else if(Xt){let qe=$(t,mt).tracking_id;xg(qe,{onSuccess:Mt,eventPrefix:o,integrationProduct:r,conversionProduct:n,conversionType:a,comparisonType:u,thresholdSetter:s,thresholdGroupCount:c,comparisonPopulation:l,score:g})}else throw new Error(A)}catch(k){i.error(k)}}function Tg(t,e,o){let r=`${f}_${e}`;function n(u){u.message===A?i.error(new T(`${mt} globals not found`),{appName:e}):i.error(u)}if(!t)return;let a=E()?Pg:bg;C(()=>a(e,{onSuccess:o,eventPrefix:r,integrationProduct:t.integration_product,conversionProduct:t.conversion_product,conversionType:t.conversion_type,comparisonType:t.comparison_type,thresholdSetter:t.threshold_setter,thresholdGroupCount:t.threshold_group_count,comparisonPopulation:t.comparison_population,score:B(t.score)}),n)}var Fi={eventHitType:Ar,name:mt,setup:Ig,send:Tg};var Fe="google_ads",kg="www.googleadservices.com",Cg="_gcl_au";function xr(t){return $(t,Fe)?.conversion_id}function Yf(t){return xr(t)?.split("-").splice(-1).join()}async function Ng(){try{return(await F(Cg))?.split(".").splice(-2).join(".")}catch(t){i.error(t);return}}async function Xf(t){try{let e=I(),o=ut(),r=Ae(),n=Date.now(),a=await Ng(),u={data:`event=${t};non_interaction=true`,fst:n,random:n,auid:a,url:e,ref:o,tiba:r,hn:kg,rfmt:3,fmt:4,async:1,cv:11,guid:"ON"};return ct(u)}catch(e){return i.error(e),ct({})}}var Og="event",Lg="https://googleads.g.doubleclick.net/pagead/viewthroughconversion";function Rg(t,e){let o=xr(t);De(o),e()}function Dg(){if(Array.isArray(window.dataLayer)){let t=!1;return w(window.dataLayer,e=>{e[0]==="config"&&e[1]&&e[1].indexOf("AW-")===0&&(t=!0)}),t}return!1}async function Fg(t,e,o){try{let r=Yf(e),n=await Xf(t);Qt(`${Lg}/${r}/?${n}`),o()}catch(r){i.error(new Error(`${Fe} api call failed with ${r}`))}}function Bg(t,e,o){if(Dg())Ee("event",t,{send_to:xr(e),non_interaction:!0}),o();else throw new Error(A)}function Mg(t,e,o){let r=`${f}_${e}`,n=R([r,t.integration_product,t.conversion_product,t.conversion_type,t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,`score_${B(t.score)}`]);function a(){typeof o=="function"&&o(Fe,{event:n})}E()?Fg(n,e,a):Bg(n,e,a)}var Bi={eventHitType:Og,name:Fe,setup:Rg,send:H(Fe,Mg)};var Mi="heap";function $g(t,e,o){let r=v(window,"heap");if(r&&typeof r.addUserProperties=="function"){let a={[R([f,t.comparison_group,t.threshold_group_count])]:t.score};r.addUserProperties(a),typeof o=="function"&&o(Mi,a)}else throw new Error(A)}var $i={name:Mi,send:H(Mi,$g)};var ho="klaviyo";function Ug(t,e){if(!E()){let o=$(t,ho).api_key,r=window._learnq?window._learnq.identify:null;if(o&&typeof r!="function"){let n=document.createElement("script");n.src=`https://static.klaviyo.com/onsite/js/klaviyo.js?company_id=${o}`,n.async=!0,document.getElementsByTagName("head")[0].appendChild(n)}}e()}async function zf(t,e,o,r){try{let u=function(){typeof r=="function"&&r(ho,e)},c=function(){let l=B(o.score),g={[e]:l};return s&&S(g,{$email:s}),g};var n=u,a=c;let s=await pt();if(E()){let l=$(t,ho).api_key;l&&q(`https://a.klaviyo.com/api/onsite/identify?c=${l}`,{body:JSON.stringify({token:l,properties:c()}),method:"POST",mode:"cors",credentials:"omit"},u())}else window._learnq||(window._learnq=[],i.error(new T(`${ho} globals not found`))),window._learnq.push(["identify",c()]),u()}catch(u){i.error(u)}}var Qf={},Ui={};function Vg(t){let e=Qf[t];return()=>{zf(e.appName,e.eventName,e.scoreObj,e.onSuccess)}}function qg(t,e,o){if(!t)return;let r=R([`${f}`,"score",t.threshold_group_count,t.comparison_group]);t.name!==void 0&&(Qf[t.name]={appName:e,eventName:r,scoreObj:t,onSuccess:o},Ui[t.name]===void 0&&(Ui[t.name]=Vg(t.name)),_.addListener(window,"beforeunload",Ui[t.name])),_.setTimeout(()=>zf(e,r,t,o),5e3)}var Vi={name:ho,setup:Ug,send:qg};var Gg="event",br="microsoft_ads";function Wg(t,{onSuccess:e,eventCategory:o,eventAction:r,eventLabel:n,eventValue:a}){function u(){typeof e=="function"&&e(br,{event_category:o,event_action:r,event_label:n,event_value:a})}try{window.uetq=window.uetq||[],window.uetq.push("event",r,{event_category:o,event_label:n,event_value:a}),u()}catch{i.error(new T(`${br} globals not found`),{appName:t})}}function Hg(t,e){let r=$(t,br).tracking_id;r?function(n,a,u,s,c){var l,g,y;n[c]=n[c]||[],l=function(){var k={ti:r};k.q=n[c],n[c]=new UET(k),n[c].push("pageLoad"),e()},g=a.createElement(u),g.src=s,g.async=1,g.onload=g.onreadystatechange=function(){var k=this.readyState;k&&k!=="loaded"&&k!=="complete"||(l(),g.onload=g.onreadystatechange=null)},y=a.getElementsByTagName(u)[0],y.parentNode.insertBefore(g,y)}(window,document,"script","//bat.bing.com/bat.js","uetq"):e()}function jg(t,e,o){let r=`${f}_${e}`;if(!t)return;let n=t.integration_product,a=R([r,n,t.conversion_product,t.conversion_type]),u=R([t.comparison_type,t.threshold_setter,t.threshold_group_count,t.comparison_population,t.comparison_group]),s,c;if(n==="prospecting")c=t.raw_probability;else{s=B(t.score);let l=Number(t.score);l>=0&&(c=l)}Wg(e,{onSuccess:o,eventCategory:a,eventAction:u,eventLabel:s,eventValue:c})}var qi={eventHitType:Gg,name:br,setup:Hg,send:jg};var Gi="oracle_responsys";function Kg(t,e,o){let r=v(window,"ORA.click");if(typeof r=="function"){let n=B(t.score);r({data:{bc_score:n,"wt.dl":99}}),typeof o=="function"&&o(Gi,n)}else throw new Error(A)}var Wi={name:Gi,send:H(Gi,Kg)};var Zf="track";var Hi="outbrain";function Jg(t,e,o){let r=v(window,"obApi");if(typeof r=="function"){let n=`${f}`,a=t.integration_product,u=R([n,a,t.threshold_group_count,B(t.score)]," ").replace(/[^0-9a-z\s]/gi,"");r(Zf,u),typeof o=="function"&&o(Hi,u)}else throw new Error(A)}var ji={name:Hi,send:H(Hi,Jg)};var we="pinterest",Pr=`${f}`;function Ki(t){return{lead_type:t.integration_product,video_title:t.conversion_product,order_id:t.conversion_type,property:t.comparison_group,promo_code:t.comparison_type,search_query:t.threshold_setter,order_quantity:B(t.threshold_group_count),value:B(t.score)}}async function tu(t,e,o){try{let r=await F("_pin_unauth"),n=await F("_derived_epik"),a={event:Pr,ed:e,tid:t,pd:{...r&&{pin_unauth:r},...n&&{derived_epik:n}}};return o&&(a.ad={loc:I(),ref:document.referrer}),a}catch(r){i.error(r);let n={event:Pr,ed:e,tid:t};return o&&(n.ad={loc:I(),ref:document.referrer}),n}}async function Yg(t,e,o){try{let r=$(e,we).tracking_id;if(r){let n="https://ct.pinterest.com",a=Ki(t),u=await tu(r,a,!1),s=ct(u,!1);q(`${n}/user/?${s}`,{method:"GET"},o,()=>i.error(new Error(`${we} api call failed`)));let c=await tu(r,a,!0),l=ct(c,!1);q(`${n}/v3/?${l}`,{method:"GET"},o,()=>i.error(new Error(`${we} api call failed`)))}}catch(r){i.error(r)}}async function Xg(t,e){try{let o=Ki(t);if($(e,we).advancedMatching){let n=await pt();S(o,{em:n})}return o}catch(o){return i.error(o),Ki(t)}}function zg(t,e,o){if(E())Yg(t,e,o);else{let r=v(window,"pintrk");if(typeof r!="function")throw new Error(A);Xg(t,e).then(n=>{r("track",Pr,n),typeof o=="function"&&o(we,Pr)}).catch(n=>i.error(n))}}var Ji={name:we,send:H(we,zg)};var ve="snapchat",Tr="_scid",kr="u_sclid",Cr="u_scsid",zi="snaptr",Xi={};function Nr(t,{getItem:e,setItem:o},r,n=Ze){return!e||!o?(i.error(new Error("Storage object is not valid")),Promise.resolve()):Promise.resolve(e(t)).then(a=>{let u=a;u||(u=n(),o(t,u)),r(u)}).catch(a=>{i.error(a)})}function Yi(t){return Xi[t]}function Or(t,e){return Xi[t]=e,Xi[t]}function Qg(t){return $(t,ve)?.pixel_id}function eu(t,e){let o=Qg(e),r=zt("navigation")[0],n=zt(zi)[0];return{pid:o,ev:t.score,pl:I(),rf:ut(),ts:Date.now(),trackId:Ze(),u_c1:Yi(Tr),u_sclid:Yi(kr),u_scsid:Yi(Cr),m_dcl:r?.domContentLoadedEventEnd,m_pi:r?.domInteractive,m_pl:r?.loadEventEnd,m_pv:r?"v2":"v1",m_rd:Math.floor(Ro()),m_sl:n?.startTime,v:"2.0.0",bt:"1d53c387",if:!1}}function Qi(t){if(typeof Promise.allSettled=="function")return Promise.allSettled(t);let e=t.map(o=>Promise.resolve(o).then(r=>({status:"fulfilled",value:r}),r=>({status:"rejected",reason:r})));return Promise.all(e)}var Zg="https://tr.snapchat.com/p";function ou(t,e){return E()?Qi([Nr(Tr,{getItem:globalThis.browser?.cookie?.get,setItem:globalThis.browser?.cookie?.set},o=>{Or(Tr,o)}),Nr(kr,{getItem:Q,setItem:gt},o=>{Or(kr,o)}),Nr(Cr,{getItem:Z,setItem:Et},o=>{Or(Cr,o)})]).finally(e):e()}function t_(t,e,o){let r=eu(t,e);q(`${Zg}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:ct(r)},()=>{typeof o=="function"&&o(ve,`${f},${t.score}`)},()=>{i.error(`Unable to send scores to ${ve}.`)})}function e_(t,e,o){let r=v(window,zi);if(typeof r=="function"){if(r("track",t.score),typeof o=="function"){let n=`${f}`,a=R([n,t.score]);o(ve,a)}}else throw new Error(A)}function o_(t,e,o){return E()?t_(t,e,o):e_(t,e,o)}var yo={name:ve,identify:ou,setup:ou,send:H(ve,o_)};var Zi="taboola";function r_(t,e,o){if(!t)return;window._tfa===void 0&&(window._tfa=[],i.error(new T(`${Zi} globals not found`),{appName:e}));let r=`${f}`,n=t.integration_product,a=R([r,n,t.threshold_group_count,B(t.score)],"_");window._tfa.push({notify:"event",name:a}),typeof o=="function"&&o(Zi,a)}var ta={name:Zi,send:r_};function n_(){return"product"}async function ea(){try{let t={},e=await pt();return e&&(e=e.toLowerCase()),t.email=e,t}catch(t){return i.error(t),{}}}function Lr(t,e){let o=R([`${f}_${t}`,e]),r=n_();return{content_id:o,content_type:r}}function ru(t){let e={context:{page:{referrer:document.referrer,url:I()},pixel:{code:t},userAgent:ot()}},o={},r=D("_ttp");return r&&(o.anonymous_id=r),ea().then(nr).then(n=>{let a={...o,...n};return e.context.user=a,e}).catch(n=>i.error(n))}function oa(t,e,o,r){return ru(t).then(n=>(n.event=e,n.properties=Lr(r,o),n))}function nu(t){return ru(t).then(e=>(e.event="EnrichAM",e))}var Eo="tiktok",i_="https://analytics.tiktok.com/api/v2/pixel";function a_(t){let e=window.ttq;return e&&e.instances()&&Array.isArray(e.instances())?!!e.instances().find(o=>t===o.pixelCode&&o.loaded):!1}function ra(){return L("tiktokAccounts")||[]}function s_(t,e){E()||ra().forEach(r=>{let n=r.pixelId;n&&!a_(n)&&function(a,u,s){a.TiktokAnalyticsObject=s;var c=a[s]=a[s]||[];c.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],c.setAndDefer=function(g,y){g[y]=function(){g.push([y].concat(Array.prototype.slice.call(arguments,0)))}};for(var l=0;l<c.methods.length;l++)c.setAndDefer(c,c.methods[l]);c.instance=function(g){for(var y=c._i[g]||[],k=0;k<c.methods.length;k++)c.setAndDefer(y,c.methods[k]);return y},c.load=function(g,y){var k="https://analytics.tiktok.com/i18n/pixel/events.js";c._i=c._i||{},c._i[g]=[],c._i[g]._u=k,c._t=c._t||{},c._t[g]=+new Date,c._o=c._o||{},c._o[g]=y||{},y=document.createElement("script"),y.type="text/javascript",y.async=!0,y.src=k+"?sdkid="+g+"&lib="+s,g=document.getElementsByTagName("script")[0],g.parentNode.insertBefore(y,g)},c.load(n),c.page()}(window,document,"ttq")}),e()}function na(){i.error(new Error(`${Eo} api call failed`))}async function iu(t,e){try{let o=await pt(),r=await or();if(o||r){let n=t.pixelId,a=v(window,"ttq.instance");typeof a=="function"&&typeof a(n).identify=="function"&&(a(n).identify({email:o,phone_number:r}),e&&typeof e=="function"&&e())}}catch(o){i.error(o)}}function ia(t,e,o){q(i_,{body:JSON.stringify(t),method:"POST"},e,o)}async function au(t,e){try{let o=t.pixelId;if(o&&(await ea()).email){let n=await nu(o);ia(n,e,na)}}catch(o){i.error(o)}}function c_(t,e){let o=E();function r(a,u){return()=>{let c=(_t(`${t}.integrations`)||[]).find(l=>Eo===l.platform);c&&c.scores&&c.scores.forEach(({score:l,integration_product:g})=>{o?oa(u,l,g,t).then(y=>{ia(y,e,na)}):a(u).track(l,Lr(t,g))}),o||e&&typeof e=="function"&&e()}}ra().forEach(a=>{let u=a.pixelId,s=v(window,"ttq.instance"),c=r(s,u);o?au(a,c):iu(a,c)})}function su(t,e){return function(){if(typeof t=="function"){let r=`${f}`,n=R([r,e.score]);t(Eo,n)}}}function f_(t,e,o,r){let n=t.pixelId,a=v(window,"ttq.instance");if(n&&typeof a=="function")iu(t),e.score&&a(n).track(e.score,Lr(o,e.integration_product)),su(r,e)();else throw new Error(A)}function u_(t,e,o,r){let n=t.pixelId;if(n)au(t).then(()=>{let a=e.score,u=e.integration_product;a&&(r=typeof r=="function"?su(r,e):void 0,oa(n,a,u,o).then(s=>{ia(s,r,na)}))});else throw new Error(A)}function p_(t,e,o){ra().forEach(n=>{E()?u_(n,t,e,o):f_(n,t,e,o)})}var wo={name:Eo,identify:c_,setup:s_,send:H(Eo,p_)};function aa({src:t,alt:e}){let o=document.createElement("img");return o.width=1,o.height=1,o.alt=e||"",o.src=t,o}var Rr="tradedesk";function m_(t,e,o){let n=$(e,Rr).pixel_id,a=B(t.score)-1,u=t.comparison_type,s=t.conversion_product,c=t.threshold_group_count;n&&!E()&&N(()=>{if(aa({src:`https://insight.adsrvr.org/track/pxl/?${n}&fmt=3&td1=blackcrow&td2=comparison_type|${u}&td3=comparison_product|${s}&td4=threshold_group_count|${c}&td5=score|${a}`}),typeof o=="function"){let l=`${f}`,g=R([l,t.score]);o(Rr,g)}else throw new Error(A)})}var sa={name:Rr,send:H(Rr,m_)};var ae="target";var Dr={[Li.name]:Li,[Ut.name]:Ut,[Fi.name]:Fi,[Bi.name]:Bi,[$i.name]:$i,[Vi.name]:Vi,[qi.name]:qi,[Wi.name]:Wi,[ji.name]:ji,[Ji.name]:Ji,[yo.name]:yo,[ta.name]:ta,[wo.name]:wo,[sa.name]:sa};function d_(t,e,o="score_push"){Kt(ae,t,o),z(`${ae} ${o}: ${t}`,e)}function l_(t,e){e&&w(e,o=>{o.name&&Dr[t].send(o,ae,d_)})}function g_(){let t=sr(ae),e={};return t.forEach(o=>{let r=Dr[o];r!==void 0&&typeof r.setup=="function"?e[o]=new Promise(n=>r.setup(ae,n)).catch(n=>{i.error(n)}):e[o]=Promise.resolve()}),e}function __(t){let e=_t(`${ae}.integrations`),o=[];return w(e,r=>{let n=r.platform,a=r.scores,u=Dr[n];t[n]&&o.push(t[n].then(()=>{u!==void 0&&typeof u.send=="function"&&l_(n,a)}))}),Promise.all(o)}var cu={appName:ae,init:g_,platforms:Dr,sendAppScores:__};var se="identity";var fu=G({name:"identity_kpi_sampling",allocations:[{percent:.1,value:!0}]});function uu(t,e,o){fu&&X(`${t} platform request for ${e}`,{"platform.name":e,"event.name":o,appName:t})}function pu(t,e){fu&&X(`${t} user request`,e)}function vo(){return{fb:window?.trekkie?.config?.S2S?.facebookCapiEnabled}}function ca(t){try{t instanceof Error&&t.stack&&(t.stack=_s(t.stack))}catch{}}function So(t,e){if(typeof e!="function")return;let o=window.fetch;window.fetch=(...r)=>o.apply(this,r).then(n=>{try{typeof r[0]=="string"&&r[0]?.match(t)&&e(n.clone())}catch(a){i.error(new lt(`Fetch Sniffer for "${t}" failing with "${a?.message}" possibly due to unexpected ${r}.`))}return n}).catch(n=>{throw ca(n),n})}function mu(t,e,o){let r=window.fetch;window.fetch=function(...n){try{if(typeof n[0]=="string"&&n[0]?.match(t)){if(o)return r.apply(this,n).then(_.setTimeout(()=>e(n),500)).catch(a=>{throw ca(a),a});e(n)}}catch{i.error(new lt(`Fetch Intercept Error For URL: ${t}`))}return r.apply(this,n).catch(a=>{throw ca(a),a})}}function Se(t){let e=new Error(t);return e.name="InvalidResponseBodyError",e.status="warn",e.stack=j(e.stack,1),e}var Be=/.*\/cart\/{1,2}add(\.js|\.json)?(\?.*)?$/gm;function h_(t,e){return new Promise((o,r)=>{q(t,e,o,r)}).catch(o=>i.error(o))}var du=/.*(\/cart(\.json|\.js)|\/cart\/(change|update)(\.js|\.json)?)(\?.*)?$/gm,Br="_bcai_cs",lu=!1;function Fr(t){try{gt(Br,t)}catch(e){i.error(e)}}async function hu(){try{return await Q(Br)}catch(t){i.error(t);return}}function y_(){return window?.Shopify?.routes?.root?h_(`${window.Shopify.routes.root}cart.js`):Promise.resolve()}function gu(t){try{return JSON.parse(t)}catch(e){return i.error(new Se(e?.message)),null}}async function _u(t){try{let e=[t];t.items?.length&&(e=t.items);let o=e.reduce((u,s)=>{let c={...u};return s?.id!==void 0&&(c[s.id]=s),c},{}),r=await hu();if(!r||!t||Object.keys(o).length===0)return;let n=(r.items??[]).map(u=>{let s={...u},c=o[s?.id];return s.quantityAdded=0,c&&(s.quantityAdded=c.quantity-s.quantity,s.quantity=c.quantity,delete o[s.id]),s});Object.keys(o).forEach(u=>{let s=o[u];n.push({...s,quantityAdded:s.quantity})});let a={...r,item_count:n.reduce((u,s)=>u+(s.quantity??0),0),total_price:(r.total_price??0)+n.reduce((u,s)=>u+s.quantityAdded*(s.price??0),0)};a.items=n.map(u=>(delete u.quantityAdded,u)),Fr(a)}catch(e){i.error(e)}}function E_(){E()||lu||(lu=!0,co(du,t=>{try{t=gu(t),t&&Fr(t)}catch(e){i.error(e)}}),So(du,t=>{t.json().then(e=>Fr(e),e=>{i.error(new Se(e?.message))}).catch(e=>i.error(e))}),co(Be,t=>{try{return t=gu(t),t?_u(t):void 0}catch(e){i.error(e);return}}),So(Be,t=>t.json().then(_u).catch(e=>i.error(e))))}function w_(){return E()?Promise.resolve():hu().then(t=>t||y_().then(e=>(e&&Fr(e),e)))}var Io={setup:E_,getData:w_};async function Me(t,e,o,r){try{let n=await J(e);if(n.length){let a={site_name:p,metadata:tr(),device_info:ot(),page_url:I(),page_referrer_url:ut(),page_title:Ae(),platform_name:t,platform_event_name:o,ids:n,user_data:{fbc:await F(Vo),fbp:await F(Zt),lit:await F(Uo),sh:{ct:await F("cart")||(await Q(Br))?.token,ch:Ic()}},resolved_score:await Z(He),capi:vo()},u={fb_test_event_code:await F("fb_test_event_code")};Oc(S(a,r,u)),uu(se,t,o)}}catch(n){i.error(n)}}var yu="klaviyo",Mr;function v_(t){return t==="track"}function S_(t){return t.overrideSampling=!0,t.message=`identity: ${t.message}`,t}function I_(t){return e=>{e.message===`identity: ${A}`?i.error(new T(t)):i.error(e)}}function fa(t,e){v_(e[0])&&Me(yu,t,e[1],{data:e[2]})}function A_(t){Array.isArray(window._learnq)&&window._learnq.forEach(e=>{fa(t,e)})}function x_(t){if(typeof window._learnq.push=="function"){let e=window._learnq.push;window._learnq.push=function(...o){let r=e.apply(this,o);try{let n=o[0];return fa(t,n),r}catch(n){return i.error(n),r}}}}function b_(t){function e(){let o=Mr.apply(this,arguments);try{let r=arguments?Array.prototype.slice.call(arguments[0]):[];return fa(t,r),o}catch(r){return i.error(r),o}}window._learnq.push&&typeof Mr!="function"&&(Mr||(Mr=window._learnq.push),window._learnq.push=e)}function P_(t,e){window._learnq=window._learnq||[],!E()&&(window._learnq?._loaded||(A_(e),x_(e)),C(()=>{if(window._learnq?._loaded){b_(e);return}throw S_(new Error(A))},I_("Klaviyo platform load not detected."),500,10))}var ua={name:yu,setup:P_};var Eu="google_ads";async function T_(t,e){try{await Ir(t,Eu,e)}catch(o){i.error(o)}}var pa={name:Eu,setup:T_};var wu="google_analytics";async function k_(t,e){try{await Ir(t,wu,e)}catch(o){i.error(o)}}var ma={name:wu,setup:k_};var xo="facebook_ads";function C_(t){return t==="track"}function vu(t,e,o,r,n){C_(e)&&Me(xo,t,o,{data:r,platform_event_id:n?.eventID})}var Ao=[];function N_(t=[]){Ao=Ao.concat(t.filter(e=>!Ao.includes(e)))}function O_(){return Ao}function L_(){Ao=[]}function R_(t,e){if(!window.fbq?.alreadyIntercepted)if(typeof window.fbq?.getState=="function"){let o=window.fbq;window.fbq=(...r)=>{vu(e,...r),o(...r)},Object.keys(o).forEach(r=>{Object.defineProperty(window.fbq,r,{set:n=>{o[r]=n},get:()=>o[r]})}),window.fbq.alreadyIntercepted=!0,O_()?.forEach(([...r])=>{vu(e,...r)}),L_()}else throw new Error(`${xo} pixel not yet loaded for ${t}.`)}async function D_(t,e){try{let o=[];if(e?.length){let r=await Zo(t);e.forEach(n=>{let a=n?.loadPixel===!0,u=n?.pixelId,s=o.includes(u);a&&u&&!s&&r&&(o.push(u),fr(u,r))})}}catch(o){i.error(o)}}async function F_(t,e){try{if(E())return;let o=he(t).platforms?.filter(r=>r.platform?.toLowerCase()===xo);await D_(e,o),await new Promise((r,n)=>{C(()=>{N_(window.fbq?.queue),R_(t,e),r()},()=>{i.error(new T(`${xo} pixel not present for ${t}.`)),n()},300)})}catch(o){i.error(o)}}var da={name:xo,setup:F_};function B_(){return new Promise((t,e)=>C(()=>{if(window.Shopify.checkout)return t(window.Shopify.checkout);throw new T("Shopify checkout object missing")},o=>{i.error(o),e(o)},100))}function M_(){if(!window.Shopify)throw new T("Shopify global missing")}function $_(t){C(()=>{M_(),t()},o=>i.error(o),300,300)}var Ie={setup:$_,getShopifyCheckout:B_};var Su="AddPaymentInfo";function U_(t,e){return t.target.matches(`${["#continue_button",...e].filter(o=>!!o).join(",")}`)}function V_(){return K()?.replace(/\/$/,"").split("/").pop()}function q_(t,e){E()||Ie.setup(()=>{Ct()==="payment"&&_.addListener(document,"click",o=>{U_(o,e?.additionalSelectors??[])&&Io.getData().then(r=>{let n=JSON.parse(JSON.stringify(r)),a=jo();a&&(n.total_price=a),t(Su,{data:r,platform_event_id:V_()})})},!0)})}var Iu={eventName:Su,setup:q_};function la(t,...e){return new Promise(o=>{_.setTimeout(o,t,[...e])}).catch(o=>i.error(o))}async function $e(t,e=10,o=300,r=!1){let n=e,a=o,u;do try{return await t()}catch(s){n-=1,n&&(await la(a),a=r?a*2:a,u=s)}while(n);throw u}function Au(){return globalThis?.Shopify?.routes?.root}async function G_(){let t=await fetch(`${Au()}cart.js`);if(!t.ok)throw new Error(`Failed to fetch cart: ${t.statusText}`);return await t.json()}var bo=class{static async fromAPI(){await $e(()=>{if(!Au())throw new Error("Root route not available")});let e=await $e(G_,2);return new bo(e)}constructor(e){this.cart=e}getEventDataForItem(e){let o=this.cart?.items?.find(r=>r?.id===e);return o&&(o={...o},delete o.sections,o.currency=ee(),o.total_item_count=this.cart?.item_count,o.total_price=this.cart?.total_price),o}},xu=bo;var $r="AddToCart";function W_(t){return typeof t=="number"&&t>=0}var ga=class{constructor(e){this.sendEvent=e}async sendAddToCartEvents(e){try{let o=e?.items||[e];o=o.filter(n=>n?.id&&W_(n?.quantity)?!0:(i.error(new Se(`SHOPIFY ${$r} addToCart request did not return valid item: ${JSON.stringify(n)}`)),!1));let r=await xu.fromAPI();o.forEach(n=>{let a=r.getEventDataForItem(n.id);if(!a){i.error(new Se("SHOPIFY updated cart did not contain the item that was added to the cart"));return}this.sendEvent($r,{data:a})})}catch(o){i.error(o)}}interceptXhr(){co(Be,e=>{let o=JSON.parse(e);this.sendAddToCartEvents(o)})}interceptFetch(){So(Be,e=>{e.json().then(o=>{this.sendAddToCartEvents(o)})})}},bu=ga;var H_={eventName:$r,setup(t){this._interceptor||(this._interceptor=new bu(t),this._interceptor.interceptXhr(),this._interceptor.interceptFetch())},cleanup(){delete this._interceptor}},Pu=H_;var j_=["button#checkout[type=submit]","button#checkout[type=submit] *","button[name=checkout]","button[name=checkout] *","input[id*=checkout][type=submit]","input[id*=checkout][type=submit] *",'[href*="/checkout"]','[href*="/checkout"] *',"button.rebuy-cart__checkout-button","button.rebuy-cart__checkout-button *","i.rebuy-button-icon","i.rebuy-button-icon *",'form[action="/cart"] [name="checkout"]','form[action="/cart"] [name="checkout"] *'],K_=["#dynamic-checkout-cart button","#dynamic-checkout-cart button *","#dynamic-checkout-cart [role=button]","#dynamic-checkout-cart [role=button] *",".additional-checkout-buttons button",".additional-checkout-buttons button *",".additional-checkout-buttons [role=button]",".additional-checkout-buttons [role=button] *"];function J_(t,e){return t.target.matches(`${[...j_,...K_,...e].filter(o=>!!o).join(",")}`)}function Y_(t,e,o){if(J_(t,e?.additionalSelectors??[])&&t.isTrusted){let r=t.target.parentNode?.form;(!r||r.checkValidity())&&o()}}function X_(t,e){return new Promise(o=>{N(()=>{["click",...e?.additionalListeners?.length?e.additionalListeners:[]].forEach(r=>_.addListener(document,r,n=>Y_(n,e,t),!0)),o()})}).catch(o=>i.error(o))}var Tu={setup:X_};function _a(t){let e=new Error(t);return e.name="BadRenderError",e.status="warn",e.stack=j(e.stack,1),e}var z_=new Promise(t=>{N(t)}),Q_="div.paypal-checkout-sandbox";function Z_(t){return new MutationObserver(e=>{e.forEach(o=>{o.addedNodes.forEach(r=>{r instanceof Element&&r.matches(Q_)&&t()})})})}async function th(t){try{if(E())return;await z_;let e=Z_(t);C(()=>{if(!(document.body instanceof Node))throw new Error;e.observe(document.body,{childList:!0})},()=>{i.error(new _a(`document.body did not render in time and had value: ${document.body}`))})}catch(e){i.error(e)}}var ku={setup:th};var Cu="InitiateCheckout";function eh(t,e){if(Pe())return Promise.resolve();Io.setup();let o=()=>{Io.getData().then(r=>{t(Cu,{data:r})})};return Promise.all([Tu.setup(o,e),ku.setup(o)])}var Nu={eventName:Cu,setup:eh};var Ou="PageView";function oh(t){t(Ou)}var Lu={eventName:Ou,setup:oh};var Du="Purchase";function Ru(t){return["order_id","line_items","total_price_set.shop_money.currency_code","total_price_set.shop_money.amount"].every(e=>v(t,e)!==void 0)}function rh(t){if(window.cart_json){let{line_items:e,currency:o,total_price:r}=window.cart_json;return S({},t,{line_items:e,total_price_set:{shop_money:{currency_code:o,amount:r}}})}return t}function nh(t){function e(o){t(Du,{data:{...o},platform_event_id:o.order_id})}x("platform",h.VIEW_RESPONSE,()=>{Ie.setup(()=>{L("page.log_purchase")&&Ie.getShopifyCheckout().then(o=>{if(Ru(o))return e(o);let r=rh(o);if(Ru(r))return e(r);throw new T("Shopify checkout required fields are missing")}).catch(o=>i.error(o))})})}var Fu={eventName:Du,setup:nh};function Bu(t,e){return S({},{content_ids:e?.map(o=>o?.product_id).filter(o=>o),currency:t?.currency,content_type:"product_group",num_items:e?.reduce((o,r)=>o+(r?.quantity?r.quantity:0),0)})}function ih(t){let e=t?.line_items??[];return S(Bu(t,e),{order_id:t?.order_id,currency:t?.total_price_set?.shop_money?.currency_code,value:t?.total_price_set?.shop_money?.amount,contents:e?.map(o=>({id:o?.product_id,quantity:o?.quantity,item_price:o?.price,title:o?.title}))})}function Mu(t){function e(r){return S({},{id:r?.product_id,quantity:r.quantity,item_price:ke(r.price),title:r.product_title,description:r.product_description,category:r.product_type})}let o=t?.items??[];return S(Bu(t,o),{value:jo()||ke(t?.total_price),contents:o?.map(r=>e(r))})}function ah(t){let e={};return t?.items?.length?e=JSON.parse(JSON.stringify(t?.items[0])):t&&(e=JSON.parse(JSON.stringify(t))),{content_category:e.product_type,content_ids:e.product_id?[e.product_id]:[],content_name:e.title,content_type:"product_group",currency:e.currency||ee(),num_items:e.quantity||1,value:e.price?ke(e.price):void 0}}function sh(t){return{search_string:t?.search_string}}function ch(t){let e={...Mu(t)};return delete e?.num_items,e}function fh(t){return S({},{content_category:t?.type,content_ids:t?.id&&[t?.id],content_name:t?.title,content_type:"product_group",currency:t?.currency,value:ke(t?.price)})}var uh={addtocart:{eventName:"AddToCart",convert:ah},purchase:{eventName:"Purchase",convert:ih,isValid:t=>t?.total_price_set?.shop_money?.currency_code&&t?.total_price_set?.shop_money?.amount},addpaymentinfo:{eventName:"AddPaymentInfo",convert:ch},viewedproduct:{eventName:"ViewContent",convert:fh},pageview:{eventName:"PageView"},initiatecheckout:{eventName:"InitiateCheckout",convert:Mu},search:{eventName:"Search",convert:sh}};function $u(t,{data:e}={}){let o=uh[t?.toLowerCase()];if(!o||o.isValid&&!o.isValid(e))return;let r=o.convert&&o.convert(e);return{eventName:o.eventName,data:r}}function ha(t,e){return t.filter(o=>o.eventSource==="shopify"&&o.originalEventName===e)}var ya="facebook_ads",Uu=[],Ur;function ph(t,e,o){async function r(){try{let n=await Zo(t);no(e,ya).forEach(u=>{let s=u?.loadPixel===!0,c=u?.pixelId,l=Uu.includes(c);s&&c&&!l&&n&&(Uu.push(c),fr(c,n))})}catch(n){i.error(n)}}o.includes("facebook_ads")?C(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")n?Ur=!1:(Ur=!0,r());else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>i.error(new T("Trekkie not loaded")),100):(Ur=!0,r())}function mh(t,e,o="identity"){if(!Ur)return;let r=$u(t,e);no(o,ya).forEach(n=>{let a=ha(n?.eventTrackers||[],t);function u(s,c){return s&&c&&r&&window.fbq&&n.pixelId}a.forEach(s=>{let c=s?.overrideEventName||s?.originalEventName;u(s,c)&&window.fbq("trackSingle",n.pixelId,c,r?.data,{eventID:e?.platform_event_id})})})}var Ea={name:ya,setup:ph,sendEvent:mh};var Vu={[Ea.name]:Ea},qu,Gu,wa,va;function dh(t,e,o,{browserEventPlatforms:r,validatePlatforms:n}={}){qu=t,Gu=e,wa=o,va=r??[],n=n??[],va.forEach(a=>{Vu[a]?.setup(wa,e,n)})}function lh(t,e={},{browserEventPlatforms:o}={}){let r=o??va;e.platform_event_id||(e.platform_event_id=Ze()),Me(qu,wa,t,e),r.forEach(n=>{Vu[n]?.sendEvent(t,e,Gu)})}var qt={setup:dh,sendEvent:lh};function Yt(){let t=dt(window.location.search).variant,e=t?t.split("?")[0]:null;if(e)return parseInt(e,10);let o=[...document.querySelectorAll('input[name="id"]')];if(o.length===1)return parseInt(o,10);let r=window.ShopifyAnalytics?.meta;if(r?.product?.id){let n=[...document.querySelectorAll(`input[name="id"][data-productid="${r?.product?.id}"]`)];if(n.length===1&&n[0]?.value)return parseInt(n[0].value,10)}if(r?.product?.variants&&r?.selectedVariantId){let n=parseInt(r?.selectedVariantId,10),a=r?.product?.variants.filter(s=>s.id===n);if(window.ReCharge&&window.ga&&document.querySelector('[name="properties[shipping_interval_frequency]"]')?.value){let s=window.ReCharge.products.filter(c=>typeof c.variant_to_duplicate[`${n}`]=="string");if(s.length===1)return s[0].variant_to_duplicate[`${n}`]}if(a.length)return n}return null}var Wu="ViewedProduct";function Hu(t,e){let o=JSON.parse(JSON.stringify(t));if(o.variants&&o.variants.length){let n=o?.variant_id??Yt()??o.variants[0].id,a=o.variants.find(u=>u.id===n)??o.variants[0];a.name&&(o.title=a.name),o.variants=[a]}o.featured_image?.startsWith("//")&&(o.featured_image=`https:${o.featured_image}`),delete o.description;let r=ee();r&&(o.currency=r),e(Wu,{data:o})}function gh(t){Ie.setup(()=>{if(Je()){let e=`${K()}.js${window.location.search}`;V(e,{},o=>Hu(o,t))}})}var ju={eventName:Wu,setup:gh,sendProductDataToPlatform:Hu};async function _h(t,e){try{if(await Z(pn))return;(e?.validatePlatforms||[]).includes("facebook_ads")&&C(()=>{let n=window?.trekkie?.config?.S2S?.facebookCapiEnabled;if(typeof n=="boolean")t(n?"FB_CAPI_ENABLED":"FB_CAPI_DISABLED"),Et(pn,!0);else throw new Error("Trekkie facebookCapiEnabled not loaded.")},()=>i.error(new T("Trekkie not loaded")),100)}catch(o){i.error(o)}}var Ku={setup:_h};var Ju="Search";function hh(t){if(Gs()){let e=I(),o={search_string:dt(e)?.q};t(Ju,{data:o})}}var Yu={eventName:Ju,setup:hh};var Sa="shopify";function yh(t){let e=he(t),[o]=e?.platforms?.filter(r=>r?.platform===Sa.toUpperCase());return o}function Eh(t,e){let o=yh(t),r=o?.eventTriggerSettings;qt.setup(Sa,t,e,o),Ku.setup(qt.sendEvent,o),Iu.setup(qt.sendEvent,r?.AddPaymentInfo),Pu.setup(qt.sendEvent,r?.AddToCart),Nu.setup(qt.sendEvent,r?.InitiateCheckout),Lu.setup(qt.sendEvent,r?.PageView),Yu.setup(qt.sendEvent,r?.Search),Fu.setup(qt.sendEvent,r?.Purchase),ju.setup(qt.sendEvent,r?.ViewedProduct)}var Ia={name:Sa,setup:Eh};var wh="shopify_webhook";function vh(t,e){async function o(){try{let r={method:"POST",body:JSON.stringify({attributes:{_bcai:btoa(JSON.stringify({site_name:p,ids:await J(e),capi:vo()})),_bcai_aid:D("_shopify_y")}}),mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json","Access-Control-Allow-Origin":"*"}};V(`${window?.Shopify?.routes?.root||"/"}cart/update.js`,r,()=>{},()=>{i.error(new lt("Cart update failed"))})}catch(r){i.error(r)}}E()||o()}var Aa={name:wh,setup:vh};function Dt(t={}){let e="https://api.blackcrow.ai/user/?";Gt(p)&&(e="https://api.sandbox.blackcrow.ai/user/?");let o={site_name:p,ids:t},r=JSON.stringify(o);Qt(e,r),pu(se,o)}function Sh(t){async function e(o){try{let r=await J(t),n=Lt("e",Bn(o));r.length&&n.length&&Dt(r.concat(n))}catch(r){i.error(r)}}pc(e)}var xa={name:"email",setup:Sh};function Ih(t){async function e(o){try{let r=await J(t),n=Lt("p",ri(o));r.length&&n.length&&Dt(r.concat(n))}catch(r){i.error(r)}}Hc(e)}var ba={name:"phone",setup:Ih};async function Po(t,e){try{return await Z(t)===e?!0:(Et(t,e),!1)}catch(o){return i.error(o),!1}}var Ah="_kx";async function xh(t){try{let r=function(u){let s=Lt("klx",u);o.length&&s.length&&Dt(o.concat(s))};var e=r;let o=await J(t),n=await le();r(W(Ah)),await Po("_bcai_s_keid",n)||r(n)}catch(o){i.error(o)}}var Pa={name:"klaviyo",setup:xh};async function bh(t){try{let a=function(){let y=W(Ts);return y?.trim().length>0?`fb.1.${Date.now()}.${y}`:n},s=function(y){let k=Object.entries(y).reduce((M,[ft,Pt])=>M.concat(Lt(ft,Pt)),[]);u.length&&k.length&&Dt(u.concat(k))};var e=a,o=s;let r=await F(Zt),n=await F(Vo),u=await J(t),c=a(),[l,g]=[await Po("_bcai_s_fbc",c),await Po("_bcai_s_fbp",r)];s({...!l&&{fbc:c},...!g&&{fbp:r}})}catch(r){i.error(r)}}var Ta={name:"facebook_ads",setup:bh};async function Ph(t){try{let e=await J(t),o=Xc();o&&e.length&&o.forEach(r=>{let n=[];n=n.concat(Lt("fn",rr(r.fn))),n=n.concat(Lt("ln",rr(r.ln))),n=n.concat(Lt("fln",rr(r.fln))),n.length&&Dt(e.concat(n))},[])}catch(e){i.error(e)}}var ka={name:"name",setup:Ph};var Xu="https://d-code.liadm.com/did-0012.min.js";function Th(){return Array.from(document.querySelectorAll(`script[src="${Xu}"]`))}function kh(){return Th().length>0}function zu(){return new Promise((t,e)=>{if(kh()){t();return}let o=document.createElement("script");o.src=Xu,o.onload=t,o.onerror=e,o.async=!0,document.head.appendChild(o)})}function Qu(){return new Promise((t,e)=>(window?.liQd_did_0012||e(new Error("Cannot run before script is loaded")),window.liQd_did_0012.resolve(t,e,{resolve:["md5","sha2","age","nonId"]})))}var Zu=new Vt(Uo);async function Nh(t){try{if(Zu.get()==="m"||E())return;let e=await J(t);if(!e.length)return;await zu();let{md5:o,sha2:r}=await Qu();if(o||r){let n=e.concat([{name:"li_md5",value:o},{name:"li_sha2",value:r}]);Dt(n),Zu.set("m",41760)}}catch(e){i.error(e)}}var Ca={name:"live_intent",setup:Nh};function Na(t,...e){return new Promise((o,r)=>{t(...e,n=>o(n),n=>r(n))})}var Oh={[ua.name]:ua,[da.name]:da,[Ia.name]:Ia,[Aa.name]:Aa,[pa.name]:pa,[ma.name]:ma},Lh={[xa.name]:xa,[ba.name]:ba,[Pa.name]:Pa,[Ta.name]:Ta,[ka.name]:ka,[Ca.name]:Ca};function Rh(t,e){e.forEach(o=>{let r=Lh[o];r&&typeof r.setup=="function"&&r.setup(t)})}function Oa(t,e){t.length!==0&&e&&e.forEach(o=>{let r=Oh[o];r&&typeof r.setup=="function"&&r.setup(se,t)})}function Dh(t){return t.filter(e=>e.source==="cookie"&&e.cookieLoadUrl)}async function Fh(t){try{for(let e=0;e<t.length;e+=1)await F(t[e].value)||await Na(V,t[e].cookieLoadUrl,{mode:"no-cors",credentials:"include"})}catch(e){i.error(e)}}async function Bh(){try{let u=function(s){x("platform",h.VIEW_RESPONSE,()=>{let c=wr(e?.scoreName);Et(He,c),s&&s(r,a)})};var t=u;let e=he(se),o=e.userAttributes||[],r=e.userIdentifiers||[],n=Dh(r),a=new Set((e.platforms||[]).map(s=>s?.platform?.toLowerCase()).filter(s=>s));n.length&&await Fh(n),N(()=>{Rh(r,o)}),e?.scoreName?await Z(He)?(Oa(r,a),u()):u(Oa):Oa(r,a)}catch(e){i.error(e)}}function Mh(){return Bh(),{}}var tp={appName:se,init:Mh};var Vr={audience:If,measure:Af,pwo:jf,target:cu,identity:tp};var To={};function $h(t){let e=jt(t.appName);if(typeof t.init=="function"&&e.active)return t.init();let o=sr(t.appName),r={};return o.forEach(n=>{r[n]=Promise.resolve()}),r}function Uh(t,e){let o=jt(t.appName);return typeof t.sendAppScores=="function"&&o.active?t.sendAppScores(e):Promise.resolve()}function ep(){w(Vr,(t,e)=>{jt(e).active&&(To[t.appName]=t)})}function op(){let t={};return w(To,e=>{t[e.appName]=$h(e)}),t}function La(t){if(Gt(p))return Promise.resolve();let e=[];return w(To,o=>{e.push(Uh(o,t[o.appName]))}),Promise.all(e)}function rp(){w(To,t=>{typeof t.cleanup=="function"&&t.cleanup()}),To={}}function Y(t){x("platform",h.VIEW_RESPONSE,e=>t(e))}function np(t,e){return Ke(t),La(e)}function qr(t,e){Ke(t),hc(t.history_id),Rc(),oi(),Tc(),La(e).then(()=>{Ut.sendValidationEvent({location:"view_request"},"FB view event not sent")}),st("platform",h.VIEW_RESPONSE,t)}var Gr=`${f}_overrides`,ip=!1,Wr=null;function Vh(){Wr=null,Et(Gr,{})}async function ap(t){try{let e=S({},Wr||await Z(Gr),t);Wr=e,Et(Gr,e),ip&&console.log(`Your <${f}> settings will apply on the next page load. Please refresh the page.`)}catch(e){i.error(e)}}function qh(){w(Vr,(t,e)=>{x("platform",`force_${e}`,()=>{ap({apps:{[e]:{active:!0}}})})})}function sp(){x("platform",h.OVERRIDES,ap),x("platform",h.CLEAR_OVERRIDES,Vh),qh()}async function cp(){try{return ip=!0,Wr||await Z(Gr)}catch(t){return i.error(t),{}}}function fp(){return ep(),op()}var up=!1;function Gh(){let t=[...document.querySelectorAll("[data-shipping-method-label-title]")];if(t.length){let e=[];return t.forEach(o=>{let n=new RegExp(/([A-Za-z0-9- ]*)(?:\s)(\([A-Za-z0-9- ]*\))/).exec(o.dataset.shippingMethodLabelTitle.trim());n&&n.length&&e.push({method:n[1],duration:n[2]})}),e}return null}function Ra(){let t=[...document.querySelectorAll("[data-checkout-total-shipping]")],e=Gh();if(t.length&&e){let o=[];return t.forEach((r,n)=>{let a={...e[n],cost:r.dataset.checkoutShippingRate,selected:r.checked};o.push(a)}),{custom_dimensions:{tax_amount:oo(),shipping_options:o}}}return null}function Wh(){let t=[...document.querySelectorAll("[data-review-section]")];if(t.length){let o=new RegExp(/([0-9A-Za-z- ]*)(?:\s)(\([A-Za-z0-9- ]*\))(?:\s**\s*)(.*)/).exec(t[0].textContent.trim());if(o&&o.length)return{custom_dimensions:{tax_amount:oo(),selected_shipping_option:{method:o[1],cost:o[3]}}}}return null}function Hh(){let t=Wh();t&&i.push({trigger:h.CA_PAYMENT,data:t})}function jh(){let t=Ra();t&&i.push({trigger:h.CA_SHIPPING_EXIT,data:t})}function Da(){N(()=>{let t=Ct();t==="payment"&&Hh(),t==="shipping"&&!up&&(_.addListener(window,"beforeunload",()=>{jh()}),up=!0)}),Y(()=>{x("platform",h.CA_PAYMENT,t=>{O(b.CA_PAYMENT,t)}),x("platform",h.CA_SHIPPING_EXIT,t=>{O(b.CA_SHIPPING_EXIT,t)})})}var Kh="bcai_ca";function pp(t){let e=W(Kh);return e==="test"?!0:e==="control"?!1:!!t}function mp(t){let e=t.comparison_type,o=t.comparison_group,r=t.score_range,a=(_t(`${At}.scores`)||[]).find(u=>u.comparison_type===e&&u.comparison_group===o);return pp(a&&r.indexOf(a.score)!==-1)}function dp(t){let o=[...document.getElementsByClassName("reduction-code__text")].find(n=>n.textContent===t),r=document.getElementsByClassName("tags-list").length;return!!(r===1&&o||r===0)}function lp(t,e){return e?t<=e:!0}function gp(t,e){return e?e<=t:!0}function _p(){return document.getElementsByClassName("recurring-total-label-content").length===0}function hp(t){return pp(t&&G({name:"checkout_abandonment",allocations:[{percent:t,value:!0}]}))}function yp(t,e,o,r,n,a,u,s){let c=o&&r&&t&&e&&a&&u&&s;return c&&n?"treatment":c&&!n?"control":"not_eligible"}function Ep(t){let e={experiment_config:ne(t),resolved_experiment_config:Nt(t)};return Object.keys(e.experiment_config).length>0?e:{}}function Ue(t){return(t*.01).toLocaleString("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2})}var Jh="checkout_abandonment",Yh="checkout_abandonment.banner.activate",wp=!1;function Ve(){return Nt(Jh)?.data?.free_shipping_test||{}}function Fa(){let t=Ve().version;if(t)return parseInt(t.replace("_",""),10)}function Hr(){wp||window.dataLayer&&L("config.google_optimize.container_id")&&(window.dataLayer.push({event:Yh}),wp=!0)}function vp(t,e){let o=document.getElementsByClassName("order-summary-toggle");o.length&&o[0].click();let r=document.getElementById("checkout_reduction_code");r&&e.coupon_code&&(r.value=e.coupon_code);let n=document.getElementById("checkout_submit");n&&(n.removeAttribute("disabled"),n.classList.remove("btn--disabled"),n.click()),_.setTimeout(()=>{let a=e.shipping_cost||595;if(a&&Fa()===15&&ee()==="USD"){let c=Ue(t+a),l=document.querySelector("dl.total-recap");if(l){let k=Rt("dt",{className:"visually-hidden",innerHTML:"<span>Total price</span>"}),M=Rt("dd",{className:"order-summary__emphasis skeleton-while-loading",innerHTML:`<span>${c}</span>`});M.style.textDecoration="line-through",l.prepend(k,M)}let g=document.querySelector("tr.total-line--subtotal");g&&(g.querySelector("span.order-summary__emphasis").textContent=c);let y=document.querySelector("tr.total-line--reduction");y&&(y.querySelector("span.reduction-code__text").textContent="FREE SHIPPING",y.querySelector("td.total-line__price").querySelector("span.order-summary__emphasis").textContent=`-${Ue(a)}`)}[...document.getElementsByClassName("total-line--shipping")].forEach(c=>{c.style.display="none"}),[...document.getElementsByClassName("reduction-code__text")].forEach(c=>{c.style.opacity="1"})},2e3),Hr()}var Sp=!1;function Xh(t){let e=t.hotjar,o=t.hotjar_ratio_of_test_bucket;return e&&o&&G({name:"hotjar",allocations:[{percent:o,value:!0}]})}function zh(t){let e=t.hjid,o=t.version;e&&o&&(function(r,n,a,u,s,c){r.hj=r.hj||function(){(r.hj.q=r.hj.q||[]).push(arguments)},r._hjSettings={hjid:e,hjsv:6},s=n.getElementsByTagName("head")[0],c=n.createElement("script"),c.async=1,c.src=a+r._hjSettings.hjid+u+r._hjSettings.hjsv,s.appendChild(c)}(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv="),window.hj("event","bcai_ca_test"),window.hj("event",`bcai_ca_test_${o}`))}function Ba(){let t=Ve();!Sp&&Xh(t)&&(zh(t),Sp=!0)}var Ip=!1;function Qh(t){let e="cart/add",o=h.ADD_TO_CART;hr(e,()=>{i.push({trigger:o})}),mu(e,()=>{i.push({trigger:o})},t)}function Zh(t){_.addListener(window,"click",e=>{let o=v(e,"target.className");(e.target.getAttribute("name")==="checkout"||t&&typeof o=="string"&&o.match(t))&&i.push({trigger:"initiate_checkout"})})}function Ma(t){let e=[];return t.items.forEach(o=>{e.push({sku:o.sku,id:o.id,quantity:o.quantity})}),t.items=e,t}function $a(t,e){return t.items&&(t=Ma(t)),{cart_json:t,...Ep(e)}}function Ua(t,e,o,r){V("/cart.json",{servletName:"ShopifyCart"},n=>{let a={custom_dimensions:$a(n,r)};o?e(o,S({},t,a)):e(S({},t,a))})}function Va(t){Ip===!1&&(C(()=>{if(It()&&L("config.shopify.add_to_cart.active"))return Qh(!0);throw new Error("Shopify globals not found")}),L("config.shopify.checkout.active")&&Zh(L("config.shopify.checkout.class_name")),Ip=!0),Y(()=>{It()&&L("config.shopify.add_to_cart.active")&&x("platform",h.ADD_TO_CART,e=>{Ua(S({},e,{page_id:"AddToCart"}),t,void 0,"checkout_abandonment")}),x("platform",h.INITIATE_CHECKOUT,e=>t(S({},e,{page_id:"checkout"})))})}var jr="checkout_abandonment",ty="bcai_ca";function ey(){return Nt(jr)?.data?.data_logging||{}}function qa(){return Nt(jr).active}function oy(){let t=Ve().exclude_channels,e=dt(I());function o(r,n){return e[r]===n}t&&(t.values||[]).forEach(n=>{o(t.param,n)&&U(dn,"true")})}function ry(){function t(r){return Object.keys(S({},r)).filter(n=>n.match("Config$")).map(n=>n.replace(/Config$/,""))}let e=v(window,"Shopify.Checkout.dynamicCheckoutPaymentInstrumentsConfig.paymentInstruments");return{custom_dimensions:{checkout_options:e?t(e):void 0}}}function ny(t={}){let e=Ot(),o=ey().checkout_data_page_ids||[];if(qa()&&o.indexOf(e)!==-1){let r=Ct(),n;r==="contact"?n=S({},t,ry()):r==="shipping"?n=S({},t,Ra()):n=t,i.push({trigger:h.CA_CART_CHECKOUT,payload:n})}}function Ap(t){N(()=>{ny(t)});let e=Ot(),o=Ve();o.test_page_id&&qa()&&e===o.test_page_id&&V("/cart.json",{servletName:"ShopifyCart"},r=>{let n=r.total_price,a=mp(o),u=dp(o.coupon_code),s=lp(n,o.max_total_price),c=gp(n,o.min_total_price),l=hp(o.test_bucket_ratio),g=_p(),y=!D(Ps),k=!D(dn),M=yp(a,u,s,c,l,g,y,k),ft=M==="treatment",Pt=o.version,Mt=W(ty),ce=S({eligible:ft,score_in_range:a,coupon_empty:u,cart_value_below_threshold:s,cart_value_above_threshold:c,test_bucket:l,non_subscription_item:g,pii_not_submitted:y,not_excluded_by_channel:k},{force_bucket:Mt}),Xt={custom_dimensions:{...$a(r,jr),eligibility:ce,experiment_group:Mt?"not_eligible":M,version:Pt}};O(b.CA_TEST,Xt),ft&&(Ba(),o.a_a_test||(U(mn,"true",30),o.display_banner_only?N(()=>Hr()):N(()=>vp(n,o))))})}function Kr(){if(oy(),D(mn)){Ba();let t=Fa();(t===13||t===14)&&qa()&&Pe()&&!v(window,"Shopify.checkout")&&Hr()}Y(()=>{x("platform",h.CA_CART_CHECKOUT,t=>{Ua(t,O,b.CA_CART_CHECKOUT,jr)}),Ap()})}var xp=!1;function Ga(){xp||(N(()=>{if(!["korres","dropps","theadventurechallenge","pacificabeauty","nativecos"].includes(p.toLowerCase()))return;let e,o;window.DeviceOrientationEvent&&(DeviceOrientationEvent.requestPermission||_.addListener(window,"deviceorientation",r=>{let[n,a,u]=[r.alpha,r.beta,r.gamma];o={alpha:n,beta:a,gamma:u}},{once:!0})),window.DeviceMotionEvent&&(DeviceMotionEvent.requestPermission||_.addListener(window,"devicemotion",r=>{let[n,a,u]=[r.acceleration.x,r.acceleration.y,r.acceleration.z];e={x:n,y:a,z:u}},{once:!0})),_.addListener(window,"beforeunload",()=>{if(o||e){let r={custom_dimensions:{motion:e,orientation:o}};O(b.DEVICE_MOTION,r)}})}),xp=!0)}var bp=!1;function Pp(t){let e=[...document.querySelectorAll(t)],o=e.length>0?e[0].textContent:null;return o?o.trim():null}function Tp(){if(Pe()){let t=document.querySelector(".tags-list"),e=t?t.querySelector(".reduction-code__text"):null,o=e?e.textContent:null,r=Pp("[data-checkout-discount-amount-target]"),n=Pp("[data-checkout-subtotal-price-target]");if(o){let a={custom_dimensions:{discount_code:o,discount_value:r,subtotal:n}};i.push({trigger:h.DISCOUNT_APPLIED,data:a})}}}function Wa(){N(Tp),Y(()=>{x("platform",h.DISCOUNT_APPLIED,t=>{O(b.DISCOUNT_APPLIED,t)})}),bp===!1&&(_.addListener(window,"beforeunload",()=>{Tp()}),bp=!0)}function ko(t){i.push({trigger:h.DISCOUNT_INTERACTION,data:{custom_dimensions:{interaction_type:t}}})}function iy(){function t(){_.setTimeout(()=>{document.getElementById("error-for-reduction_code")?ko("invalidated"):ko("validated")},3e3)}let e=document.getElementById("checkout_reduction_code");e&&_.addListener(e,"focus",()=>{ko("focused_input")});let o=document.getElementById("checkout_submit");o&&_.addListener(o.form,"submit",t),[...document.getElementsByClassName("tag")].forEach(n=>{let a=n.querySelector("span.reduction-code");a&&_.addListener(a,"click",()=>{ko("clicked_code")});let u=n.querySelector("button[type=submit]");u&&_.addListener(u,"click",()=>{ko("clicked_remove")})})}function Ha(){N(iy),Y(()=>{x("platform",h.DISCOUNT_INTERACTION,t=>{O(b.DISCOUNT_INTERACTION,t)})})}function ja(){if(Ct()!=="contact")return;let t,e,o={custom_dimensions:{initial_opt_in_status_email:null,initial_opt_in_status_phone:null,final_opt_in_status_email:null,final_opt_in_status_phone:null}};N(()=>{t=document.getElementById("checkout_buyer_accepts_marketing"),e=document.getElementById("ps_accepts_sms"),o.custom_dimensions.initial_opt_in_status_email=t?t.checked:null,o.custom_dimensions.initial_opt_in_status_phone=e?e.checked:null;let r=document.getElementById("continue_button");r&&_.addListener(r,"click",()=>{e||(e=document.getElementById("ps_accepts_sms")),o.custom_dimensions.final_opt_in_status_email=t?t.checked:null,o.custom_dimensions.final_opt_in_status_phone=e?e.checked:null,O(b.MARKETING_CHECKOUT_EVENT,o)})})}var bt={platforms:{attentive:{submitEvents:["EMAIL_LEAD"]},bounceExchange:{submitEvents:["input_submission","campaign_submit"]},justUno:{},klaviyo:{submitEvents:["submit"]},sleekNote:{submitEvents:["submit"]},wisePops:{submitEvents:["after-form-submit"]},generic:{}},platformIdentifiers:["kl-","klaviyo","attn","fieldcaptureform","sleeknote","justuno","bx","bounceexchange","wisepops"],platformIdentifierExceptions:["kmail"],metadataViolators:["phone","email","sentIdentifiers"],page_id:"EmailSubmit"};var{platformIdentifiers:ay,platformIdentifierExceptions:sy,metadataViolators:cy}=bt,Cp=(t,{qualified:e,resolveTarget:o})=>t?e(t)?o?t:!0:t.parentElement?Cp(t.parentElement,{qualified:e,resolveTarget:o}):!1:!1,fy=t=>t.style.position==="fixed"||t.style.top==="0"||t.style.top==="0px",uy=t=>t.nodeName.toLowerCase()==="iframe",py={form:{qualified:t=>t.nodeName.toLowerCase()==="form",resolveTarget:!0},footer:{qualified:t=>t.nodeName.toLowerCase()==="footer",resolveTarget:!1},overlay:{qualified:t=>fy(t)||uy(t),resolveTarget:!1}},Ka=(t,e)=>Cp(t,py[e]),Np=t=>Ka(t,"form"),my=t=>Ka(t,"footer"),dy=t=>Ka(t,"overlay"),ly=t=>{if(!t)return"unknown";try{if(dy(t))return"overlay";if(my(t))return"footer";if(Ot()==="checkout")return"checkout"}catch{i.error(new T("email location failed"))}return"unknown"},Op=()=>{let t=Ot()==="checkout",e=document.querySelector('input[type="checkbox"]');return t&&e&&!e.checked},gy=(t,e)=>t.some(o=>typeof o=="string"&&o.toLowerCase().includes(e)),kp=(t,e)=>e.some(gy.bind(null,t)),Lp=t=>{let e=[...Array.from(t.classList),t.action,t.id];return kp(e,ay)&&!kp(e,sy)},_y=t=>{window._learnq=window._learnq||[],window._learnq.push(["identify",{$email:t}])},hy=(t,e)=>{let o={...t};return w(Object.keys(o),r=>{w(e,n=>{r.includes(n)&&(o[r]="redacted")})}),o},yy=t=>{i.push({trigger:h.VIEW,data:{page_id:bt.page_id,custom_dimensions:t}})},vt=(t,e)=>{let o=t.email||t.$email,r=Rn(o);Dn(r)&&(Te(r),_y(r),yy({...hy(t,cy),location:ly(e)}),yt.piiWasSubmitted())};var Rp=["checkout","account","login"],Ey=Ot(),wy=K(),Dp=t=>{if(Rp.includes(Ey)||Rp.some(o=>wy.includes(o))||Op())return;let e=t.value;e&&vt({email:e},document.activeElement)},vy=()=>{let t;w(Mn(),e=>{if(t=Np(e),t){if(Lp(t))return;_.addListener(t,"submit",()=>{Dp(e)})}else _.addListener(e,"focusout",()=>{Dp(e)})})};function Ja(){N(()=>{_.setTimeout(vy,5e3)})}var{submitEvents:Sy}=bt.platforms.attentive;function Ya(){_.addListener(window,"message",t=>{let{origin:e,data:o,target:r}=t;if(e.includes(".attn.tv")){let{__attentive:n}=o;Sy.includes(n?.action)&&vt(n,r.document.activeElement)}})}var Iy=(t,e)=>{if(e.isWrapped)return e;function o(){try{t.apply(this,arguments)}catch{}return e.apply(this,arguments)}return o.isWrapped=!0,o},Jr=(t,e)=>Iy(t,typeof e=="function"?e:()=>{});var{submitEvents:Ay}=bt.platforms.bounceExchange;function Xa(){_.setTimeout(()=>{window.bouncex=window.bouncex||{},window.bouncex&&typeof window.bouncex.push=="function"&&(window.bouncex.push=Jr((...t)=>{let{email:e,source:o}=t[0][1];Ay.includes(o)&&vt({email:e})},window.bouncex.push))},8e3)}function za(){_.setTimeout(()=>{window.ju_callback=Jr((t,e)=>{vt({email:e})},window.ju_callback)},5e3)}var{submitEvents:xy}=bt.platforms.klaviyo;function Qa(){_.addListener(window,"klaviyoForms",t=>{let{detail:e,target:o}=t,{type:r,metaData:n}=e;xy.includes(r)&&vt(n,o.document.activeElement)})}var{submitEvents:by}=bt.platforms.sleekNote;function Za(){_.addListener(window,"sleekNote",t=>{let{data:e,target:o}=t;by.includes(e.type)&&vt(e.data,o.activeElement)})}var{submitEvents:Py}=bt.platforms.wisePops;function ts(){_.setTimeout(()=>{Py.forEach(t=>{window[window.WisePopsObject]&&typeof window[window.WisePopsObject]=="function"&&window[window.WisePopsObject]("listen",t,e=>{let{target:o}=e,r=o.querySelector('input[type="email"]')?.value;vt({email:r},o)})})},5e3)}var Ty={attentive:Ya,bounce_exchange:Xa,just_uno:za,klaviyo:Qa,sleek_note:Za,wise_pops:ts};function es(){let t=L("config.emailFormTracking"),e=t?.active||!1,o=t?.platforms||[];e&&e===!0&&(Ja(),o.map(r=>r.name).forEach(r=>{let n=Ty[r];n&&n()}))}var Fp=!1;function ky(t){return t.filter(o=>o.available===!0).length>0}function Cy(t,e){let o=t.filter(r=>r.id.toString()===e);return o[0]?o[0].available:!0}function Bp(){V(`${I().split("?")[0]}.js`,{},t=>{let e=Yt(),o=t.variants&&t.variants.length>1,r={custom_dimensions:{out_of_stock:{in_stock:!1}}};e&&o&&!Cy(t.variants,e)?(r.custom_dimensions.out_of_stock.product_id=e,i.push({trigger:h.OUT_OF_STOCK,data:r})):!e&&o&&!ky(t.variants)?(r.custom_dimensions.out_of_stock.product_id=t.variants[0].id,i.push({trigger:h.OUT_OF_STOCK,data:r})):!e&&!o&&!t.available&&(t.variants?r.custom_dimensions.out_of_stock.product_id=t.variants[0].id:r.custom_dimensions.out_of_stock.product_id=t.id,i.push({trigger:h.OUT_OF_STOCK,data:r}))},()=>({}))}function Ny(){let t=document.URL;_.addListener(document,"change",()=>{let e=document.URL;Yt()&&e&&t!==e&&(t=e,Bp())})}function os(){N(()=>{Je()&&(Bp(),Fp===!1&&(Ny(),Fp=!0))}),Y(()=>{x("platform",h.OUT_OF_STOCK,t=>{O(b.OUT_OF_STOCK,t)})})}var Mp=!1;function Oy(t){let o=[{type:"shop_pay",button:[...document.querySelectorAll('[data-testid="ShopifyPay-button"]')]},{type:"google_pay",button:[...document.querySelectorAll('[data-testid="GooglePay-button"]')]},{type:"apple_pay",button:[...document.querySelectorAll('[data-testid="ApplePay-button"]')]}].filter(r=>r.button[0]===t.target);if(o.length){let r={custom_dimensions:{type:o[0].type}};i.push({trigger:h.PAYMENT_METHOD_CLICK,data:r})}}function rs(){Mp||(N(()=>{Ct()==="contact"&&(_.addListener(window,"blur",()=>{if(document.activeElement.title==="Checkout with PayPal"){let e={custom_dimensions:{type:"paypal"}};i.push({trigger:h.PAYMENT_METHOD_CLICK,data:e})}}),_.addListener(document,"click",e=>{Oy(e)}))}),Mp=!0),Y(()=>{x("platform",h.PAYMENT_METHOD_CLICK,t=>{O(b.PAYMENT_METHOD_CLICK,t)})})}var $p=!1;function Ly(t){let e=t.ratio;return t.active&&e&&G({name:"hotjar",allocations:[{percent:e,value:!0}]})}function Ry(t,e){t&&e&&e.length&&(function(o,r,n,a,u,s){o.hj=o.hj||function(){(o.hj.q=o.hj.q||[]).push(arguments)},o._hjSettings={hjid:t,hjsv:6},u=r.getElementsByTagName("head")[0],s=r.createElement("script"),s.async=1,s.src=n+o._hjSettings.hjid+a+o._hjSettings.hjsv,u.appendChild(s)}(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv="),w(e,o=>{window.hj("event",o)}))}function Up(t,e){!$p&&Ly(e)&&(Ry(e.hjid,t),$p=!0)}function Dy(t){document.documentElement.dispatchEvent(new CustomEvent("cart:refresh",{bubbles:!0}));let e=document.querySelector(t.cartCountSelector)||{},o=B(e.innerText.replace(/\D/g,""));e.innerText=(o+1).toString();let r=document.getElementById("mini-cart")||{};r.open=!0}function Fy(t,e){t.innerHTML='<img class="loading_image" src="https://init.blackcrow.ai/public/loading.svg">',_.setTimeout(()=>{t.innerHTML=e},2e3)}function By(t,e){let o=Rt("span",{className:"sticky-call-to-action-headline",innerHTML:t});return _.addListener(o,"click",()=>{e.custom_dimensions.predictive_button.action="clicked headline",i.push({trigger:h.PREDICTIVE_BUTTON,data:e})}),o}function Vp(t,e,o,r){let n={method:"POST",body:JSON.stringify(t),headers:{Accept:"application/json","Content-Type":"application/json"}};V("/cart/add.js",n,()=>{o.name.match("checkout")?window.location.href=r:Dy(e)})}function qp(t,e,o,r,n,a){let u=o.singleItemCheckout?`/cart/${n}:1`:"/checkout",s={items:[{id:n,quantity:1}]};if(e.length&&!a&&Fy(t,e),o.addToCartOverrideSelector&&r.name.match("cart")&&K()?.includes("products")){document.querySelector(o.addToCartOverrideSelector)?.click();return}if(r?.type==="shop-pay"&&(u="/checkout?payment=shop_pay"),window.ReCharge&&window.ga){let c=document.querySelector('[name="properties[shipping_interval_frequency]"]')?.value,l=document.querySelector('[name="properties[shipping_interval_unit_type]"]')?.value;c&&l&&(s.items[0].properties={shipping_interval_frequency:c,shipping_interval_unit_type:l}),V("/cart.js",{},g=>{let y=document.querySelectorAll(`input[name='id'][value='${n}']`).length===0;if(g.items.filter(M=>typeof M.properties?.shipping_interval_frequency=="string").length||y){let M=`&cart_token=${(document.cookie.match("(^|; )cart=([^;]*)")||0)[2]}`,ft=`myshopify_domain=${window.Shopify.shop}`,Pt=`&${window.ga.getAll()[0].get("linkerParam")}`;u=`https://checkout.rechargeapps.com/r/checkout?${ft}${M}${Pt}`}})}if(window.ReChargeWidget?.getWidgets){let c=window.ReChargeWidget.getWidgets()[0]||{},l=c.state?.selectedVariantId,g=c.state?.sellingPlanId,y=c.productData?.selling_plan_groups[0]?.selling_plan_group_id,k=c.subscriptionActive||!1,M={id:l,sellingPlanId:g,sellingPlanGroupId:y,isSubscription:k};if(l&&g&&y&&window.ReChargeWidget?.api?.postToCart){window.ReChargeWidget.api.postToCart(M).then(()=>{window.location.href=u});return}}if(window.og?.store?.getState()?.optedin&&window.og?.store?.getState()?.config?.frequencies?.length>0){let c=window.og?.store?.getState()?.optedin;c&&c.length&&(s.items[0].id=c[c.length-1].id,s.items[0].selling_plan=c[c.length-1].frequency)}window.Rebuy?V(`${I().split("?")[0]}?view=metafield`,{},c=>{c.metafields.erpLineItem&&(s.items[0].properties={"_erp-line-item":c.metafields.erpLineItem}),Vp(s,o,r,u)}):Vp(s,o,r,u)}function ns(t,e,o,r,n,a=!1){_.addListener(t,"click",()=>{a?n.custom_dimensions.predictive_button.action="clicked alternative option":n.custom_dimensions.predictive_button.action="clicked button";let u=Yt();if(u)qp(t,e,o,r,u,a);else{let s=document.querySelector('a[role="button"]'),c=K()?.includes("pages")&&s?.href?`${s.href}.js`:`${I().split("?")[0]}.js`;V(c,{},l=>{let g=l.variants.filter(y=>y.available===!0);g.length!==0&&(u=g[0].id,qp(t,e,o,r,u,a))})}i.push({trigger:h.PREDICTIVE_BUTTON,data:n})})}function Gp(t,e,o,r){let n=Rt("div",{className:`sticky-call-to-action-container ${e.animated?"animated":""}`}),a;if(e.headline){let c=By(e.headline,o);n.append(c)}if(r?.type==="shop-pay"){let c=Rt("script",{src:"https://cdn.shopify.com/shopifycloud/shop-js/client.js"}),l=document.createElement("shop-pay-button");return l.setAttribute("store-url",`${window.location.origin}`),n.append(c),n.append(l),ns(l,"",e,r,o),n}let u=r.text;a={name:"add",type:"button",innerHTML:u,"accept-charset":"UTF-8",className:`sticky-call-to-action-submit ${r.name}`};let s=Rt("button",a);if(n.append(s),ns(s,u,e,r,o),r.alt_option_text){a={innerHTML:r.alt_option_text,className:`sticky-call-to-action-submit-alt-option ${r.name}`};let c=Rt("a",a),l=document.querySelector(r.alt_option_override_container);l?l.append(c):n.append(c);let g={...r};r.name.match("checkout")?g.name="cart":g.name="checkout",ns(c,r.alt_option_text,e,g,o,!0)}return n}var My="event",$y="google_analytics";function Uy(t){t.message===A?i.error(new T(`${$y} globals not found`)):i.error(t)}function Wp(t,e){let o=R(["blackcrow",t,e]);C(()=>{if(typeof window.ga=="function"){window.ga("send",{hitType:My,eventCategory:o,eventAction:null,eventLabel:null,nonInteraction:!0});return}if(typeof window.gtag=="function"){window.gtag("event",o,{event_category:o,event_label:null,non_interaction:!0});return}throw new Error(A)},Uy)}var Vy="bcai_pbtn",qy="bcai_pbgn",Gy="bcai_pbs",is="sticky_call_to_action";function Wy(){let t=W(Vy);return t&&t.length?t:!1}function Hy(){let t=W(qy);return["control","treatment"].includes(t)?t:!1}function jy(){let t=W(Gy);return parseFloat(t)>=0?t:!1}function Ky(){return Nt(is)?.data||{}}function Jy(t,e,o,r){let n=document.querySelector(t.original_button_selector),a=e.querySelector(".sticky-call-to-action-submit");if(n){let u=t.text;if(t.include_prices){let s=o.variants.find(l=>l.id===r)||{};u+=` - ${Ue(s.price||o.price)}`;let c=document.querySelector(`input[value="${r}"]`);_.addListener(c,"change",()=>{c.value.length&&(s=o.variants.find(l=>l.id===parseInt(c.value,10))||{},n.innerHTML=`${t.text} - ${Ue(s.price||o.price)}`)})}n.innerHTML=u,_.addListener(n,"click",s=>{s.preventDefault(),a.click()})}}function Yy(t,e,o){let r=document.querySelector(t),n=document.querySelector(e);if(r&&_.addListener(r,"click",()=>{o.custom_dimensions.predictive_button.action="clicked button",i.push({trigger:h.PREDICTIVE_BUTTON,data:o})}),n)if(!n.attributes.hidden)o.custom_dimensions.predictive_button.action="render",i.push({trigger:h.PREDICTIVE_BUTTON,data:o});else{let a=new MutationObserver(()=>{n.attributes.hidden||(o.custom_dimensions.predictive_button.action="render",i.push({trigger:h.PREDICTIVE_BUTTON,data:o}),a.disconnect())});a.observe(n,{attributes:!0,childList:!0})}}function Hp(t,e,o,r,n){let a=document.querySelector(t.openMenuSelector);de()>=r&&!e.classList.contains("active")&&Zs()<464&&a===null?(e.classList.add("active"),o.custom_dimensions.predictive_button.action="render",i.push({trigger:h.PREDICTIVE_BUTTON,data:o})):n&&e.classList.contains("active")&&de()<r&&e.classList.remove("active")}function Xy(t){let e=Hy();return e||t.experiment_group}function jp(t,e=[]){let o=jy()||e.find(r=>r.name&&r.name===t.score_name)?.score;return o?t.score_values.sort((n,a)=>a.score_threshold-n.score_threshold).find(n=>n.score_threshold<=o):null}function zy(t,e){let o=Wy(),n=ne(is)?.data?.button_displayed,a={};return o&&Array.isArray(n)?(a=n.find(u=>u.name===o)?.value,a.score_values?jp(a,e):a):t?.button_displayed?.score_values?jp(t.button_displayed,e):t.button_displayed}function Qy(){let t=ne(is);if(!((K()?.includes("products")||K()?.includes("pages"))&&t.active))return;let e=Ky();if(e.product_blacklist&&e.product_blacklist.includes(Ot()))return;let o=Xy(e),r=`${I().split("?")[0]}.js`;function n(a){let u=Yt();if(!u&&!(a.variants&&a.variants[0]?.id))return;let s=a.variants.find(c=>c.id===u)||{};V("/cart.js",{},c=>{if(document.querySelector(".sticky-call-to-action-container"))return;c.items&&(c=Ma(c));let l={custom_dimensions:{predictive_button:{action:"impression",button_displayed:e.button_displayed,experiment_group:o,item_cost:s.price||a.price,cart_total:c.total_price,cart_json:c,version:e.version}}};O(b.PREDICTIVE_BUTTON_DECISION,l,g=>{e.send_ga_events&&Wp(l.custom_dimensions.predictive_button.action,o);let y=zy(e,g.apps?.audience?.scores);if(l.custom_dimensions.predictive_button.button_displayed=y,i.push({trigger:h.PREDICTIVE_BUTTON,data:l}),!o||!y)return;if(o==="control"){if(!e.controlButtonSelector)return;Yy(e.controlButtonSelector,e.controlButtonContainer,l);return}if(document.head.insertAdjacentHTML("beforeend",`<link type="text/css" rel="stylesheet" href="https://init.blackcrow.ai/public/css/${p.toLowerCase()}.css">`),e.hotjar){let ft=[`bcai_pred_bttn_${y.name}`];Up(ft,e.hotjar)}let k=Gp(a,e,l,y);document.body.append(k),y.original_button_selector&&Jy(y,k,a,u);let M=y.scroll_depth||e.scroll_depth;M?_.addListener(window,"scroll",()=>{Hp(e,k,l,M,y.hide_on_scroll_up)}):Hp(e,k,l,M,y.hide_on_scroll_up)})})}if(K().includes("pages")){let a=new MutationObserver(()=>{if(document.querySelector('a[role="button"]')?.href){if(a.disconnect(),r=`${document.querySelector('a[role="button"]').href}.js`,!r.includes("/products/"))return;V(r,{},s=>n(s))}});a.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0})}else V(r,{},a=>n(a))}function Yr(){Y(()=>{N(Qy),x("platform",h.PREDICTIVE_BUTTON,t=>{O(b.PREDICTIVE_BUTTON,t)})})}function as(){N(()=>{_.setTimeout(()=>{if(window.Rebuy){let t={custom_dimensions:{modules:window.Rebuy.modules}};i.push({trigger:h.RB_ACTIVE,data:t})}},3e3)}),Y(()=>{x("platform",h.RB_ACTIVE,t=>{O(b.RB_ACTIVE,t)})})}var Kp=[Kr,Ga,Wa,Ha,ja,es,os,rs,Yr,Da,Va,as];var Xr="target",Zy=[Ut,yo,wo];function ss(){function t(o){let r="advanced_matching";Kt(Xr,o,r),z(`${Xr} ${r}: ${o}`,"update")}function e(o){let r=$(Xr,o.name);!r||Object.keys(r).length===0||typeof o.identify=="function"&&o.identify(Xr,()=>t(o.name))}Zy.forEach(o=>e(o))}function cs(){function t(){mc(ss),jc(ss),Kc()}(L("config.visitor.set_info")||ar())&&N(t)}var Jp=!0;function tE(t){rp(),ei(),hn(),Xn(),Ke({}),wn({}),t&&Object.keys(t).length>0&&Wo(t)}async function fs(t={}){try{async function e(n){try{let c=function(l={}){Xn(),O(b.VIEW,l,g=>{np(g,s)})};var a=c;sp();let u=S(n,await cp());if(wn(u),st("platform",h.START,{build:"13948"}),x("platform",h.REFRESH,o),v(u,"page.ignored"))return;Rf();let s=fp();Y(()=>{x("platform",h.VIEW,l=>c(l))}),Kp.forEach(l=>l(c)),await O(b.VIEW,{},l=>{qr(l,s)},()=>{qr({},s)})}catch(u){i.error(u)}}async function o(n={}){try{let a=t.pages||[],u=I(),s=wc(a,u);if(z(`page: ${s.id} ${s.isNewPage?"\u2714":"\xD7"}`,s),s.isNewPage){let c=S(t,s.config);Jp?(hn(),Jp=!1):tE(n),await e(c)}cs()}catch(a){i.error(a)}}async function r(n=0){try{te(t)?await o():n<5?_.setTimeout(()=>{r(n+1)},400):(await o(),i.error(new T("vendor id not found (google id)")))}catch(a){i.error(a)}}v(t,"config.visitor.id_source")==="google"?await r():await o()}catch(e){i.error(e)}}var eE=G({name:"log_spa_refresh_sampling",allocations:[{percent:.1,value:!0}]});function Yp(t,e){eE&&X(t,{url:e})}var Xp={SPA_REFRESH_ENABLED:"config.spa.refresh.enabled",SPA_REFRESH_DELAY:"config.spa.refresh.delay"};function us(){if(!E()&&L(Xp.SPA_REFRESH_ENABLED)){let t=L(Xp.SPA_REFRESH_DELAY)||1e3;(e=>{if(e===void 0){i.error("Unable to setup SPA refresh: window.history is undefined");return}function o(a){Yp("history_intercepted_initial",a),_.setTimeout(()=>{Yp("history_intercepted_timeout",a),i.push({trigger:h.REFRESH})},t)}let r=e.pushState;e.pushState=function(){try{let u=arguments.length>=3?arguments[2]:"not passed";o(u)}catch(u){i.error(u)}return r.apply(e,arguments)};let n=e.replaceState;e.replaceState=function(){try{let u=arguments.length>=3?arguments[2]:"not passed";o(u)}catch(u){i.error(u)}return n.apply(e,arguments)}})(window.history)}}function zp(){let t=L("config.events");return t&&t.purchase&&t.purchase.fbEventsToIntercept&&t.purchase.fbEventsToIntercept.length>0?t.purchase.fbEventsToIntercept:null}function Qp(){let t=L("config.events");return t&&t.view&&t.view.fbEventsToIntercept&&t.view.fbEventsToIntercept.length>0?t.view.fbEventsToIntercept:null}var oE=["load","error"],rE=G({name:"log_intercepted_fb_event",allocations:[{percent:.1,value:!0}]});function Zp(t,e){let o="Interepted FB event - ".concat(t.event,". Event fired - ",e.type);rE&&X(o)}function tm(t,e){return t.find(o=>{let r=o.event,a=(o.filters||[]).map(s=>`.*${s}`).join(),u=`facebook.com/tr/\\?id=.*&ev=${r}${a}`;return e.src.match(u)})}function nE(t,e,o){let r=tm(e,o);r&&(Zp(r,t),i.push({trigger:h.PURCHASE}))}function iE(t,e,o){let r=tm(e,o);r&&(Zp(r,t),!It()&&r.event==="AddToCart"&&i.push({trigger:h.ADD_TO_CART}),i.push({trigger:h.VIEW,data:{page_id:r.page_id}}))}var aE=(t,e,o,r)=>{o&&nE(e,o,t),r&&iE(e,r,t)};function ps(){if(!E()){let t=zp(),e=Qp();if(t||e){let o=Image;Image=function(...n){let a=new o(...n);return oE.forEach(u=>_.addListener(a,u,s=>{aE(a,s,t,e)})),a}}}}function ms(t={},e=()=>{}){bn(t,async()=>{try{if(i.SITE_NAME=p,qs(),Zn(),i.coreStarted){i.push({trigger:h.REFRESH});return}i.coreStarted=!0,ti(),vc(t.param_transforms),Dc(),await fs(t),us(),ps(),Pc(),e()}catch(o){i.error(o)}})}var sE="https://init.blackcrow.ai/",cE="https://shopify-init.blackcrow.ai/";function em(){let t="justfly.js"?.replace(".js",""),e=m;return e?.includes("init.blackcrow.ai")||(e=It()?cE:sE,i.error(new T(`justfly.js is not hosted on the blackcrow CDN but on ${m}.`))),`${e}config/${t}.json`}async function fE(){let t=await fetch(em(),{method:"GET"});if(!t.ok)throw new Error(`${t.status} ${t.statusText}`);let e=await t.json(),o=atob(e.data);return JSON.parse(o)}async function uE(){try{return await $e(fE,8,10,!0)}catch{throw new Error(`Failed to fetch config from CDN - ${em()}`)}}async function ds(t,e){try{Js();let o=await uE();await t?.(o),ms(o,e)}catch(o){i.error(o)}}window.IntentMediaProperties&&(window.IntentProperties={page_id:window.IntentMediaProperties.page_id,namespace:"blackcrow",site_country:window.IntentMediaProperties.site_country,site_language:window.IntentMediaProperties.site_language,site_name:window.IntentMediaProperties.site_name,site_reporting_value_01:window.IntentMediaProperties.site_custom_1,site_currency:window.IntentMediaProperties.site_currency,travel:{start_date:window.IntentMediaProperties.travel_date_start,end_date:window.IntentMediaProperties.travel_date_end,origin_airport:window.IntentMediaProperties.flight_origin,destination_airport:window.IntentMediaProperties.flight_destination,travelers:window.IntentMediaProperties.travelers}});var pE=t=>{d.push(t)};window.blackcrow.push=window.blackcrow.push||pE;ds();})();
}catch(e){try{e.message=e.name+':'+e.message;e.name='ParseError';if(blackcrow&&blackcrow.BUILD_NUMBER==='DEV')(blackcrow.error||console.error||console.log)(e);else(blackcrow&&blackcrow.error&&blackcrow.error(e));}catch(_){}}})();
